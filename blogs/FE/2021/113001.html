<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue实现与原理 | Aki Huang 🤔👊💪✍️👀👨‍💻‍ </title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="让正确的事情持续发生">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.37f5b436.css" as="style"><link rel="preload" href="/assets/js/app.a75dbc90.js" as="script"><link rel="preload" href="/assets/js/3.d0bbcc43.js" as="script"><link rel="preload" href="/assets/js/1.336ca81d.js" as="script"><link rel="preload" href="/assets/js/18.dc22300f.js" as="script"><link rel="prefetch" href="/assets/js/10.4a2cddfb.js"><link rel="prefetch" href="/assets/js/11.3801c582.js"><link rel="prefetch" href="/assets/js/12.1bbc0cc0.js"><link rel="prefetch" href="/assets/js/13.3f908a53.js"><link rel="prefetch" href="/assets/js/14.2c32c481.js"><link rel="prefetch" href="/assets/js/15.ba58271d.js"><link rel="prefetch" href="/assets/js/16.d04c8f3b.js"><link rel="prefetch" href="/assets/js/17.d14b48ad.js"><link rel="prefetch" href="/assets/js/19.332970f7.js"><link rel="prefetch" href="/assets/js/20.53ae54a3.js"><link rel="prefetch" href="/assets/js/21.81c5d8a2.js"><link rel="prefetch" href="/assets/js/4.a91b6936.js"><link rel="prefetch" href="/assets/js/5.86c7871a.js"><link rel="prefetch" href="/assets/js/6.82084497.js"><link rel="prefetch" href="/assets/js/7.24c0275c.js"><link rel="prefetch" href="/assets/js/8.ab911f8a.js"><link rel="prefetch" href="/assets/js/9.85f8eacf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.37f5b436.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Aki Huang 🤔👊💪✍️👀👨‍💻‍ </h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>让正确的事情持续发生</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Aki Huang</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Aki Huang 🤔👊💪✍️👀👨‍💻‍ " class="logo"> <span class="site-name">Aki Huang 🤔👊💪✍️👀👨‍💻‍ </span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Data Structures and Algorithms/" class="nav-link"><i class="undefined"></i>
  Data Structures and Algorithms
</a></li><li class="dropdown-item"><!----> <a href="/categories/FrontEnd/" class="nav-link"><i class="undefined"></i>
  FrontEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/Think/" class="nav-link"><i class="undefined"></i>
  Think
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/huangzonggui/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="huangzonggui huangzonggui-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/870468940997319" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="huangzonggui huangzonggui-juejin"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    Aki Huang
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>10</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>12</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Data Structures and Algorithms/" class="nav-link"><i class="undefined"></i>
  Data Structures and Algorithms
</a></li><li class="dropdown-item"><!----> <a href="/categories/FrontEnd/" class="nav-link"><i class="undefined"></i>
  FrontEnd
</a></li><li class="dropdown-item"><!----> <a href="/categories/Think/" class="nav-link"><i class="undefined"></i>
  Think
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/huangzonggui/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="huangzonggui huangzonggui-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/870468940997319" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="huangzonggui huangzonggui-juejin"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Vue实现与原理</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Aki Huang</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Vue实现与原理</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>Aki Huang</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>11/30/2021</span></i> <i class="iconfont reco-eye" data-v-1ff7123e><span id="/blogs/FE/2021/113001.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-1ff7123e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Vue</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="思考🤔"><a href="#思考🤔" class="header-anchor">#</a> 思考🤔</h1> <ul><li><code>v-show</code> 和 <code>v-if</code>的区别
<ul><li>v-show: 节点一直存在，只是通过css display 来显示或隐藏，不会重新渲染和更新</li> <li>v-if: 节点会根据值来动态创建和销毁</li> <li>使用场景
<ul><li><strong>组件频繁切换显示状态时</strong>，用<code>v-show</code>，可以降低渲染消耗组件创建以后；</li> <li>不需要频繁切换显示状态的用<code>v-if</code></li></ul></li></ul></li> <li>为何<code>v-for</code>中要用<code>key</code></li> <li>Vue组件的生命周期调用顺序（有父子组件的情况）</li> <li>Vue组件如何通讯
<ul><li>父子组件，使用属性和触发事件</li> <li>组件之间无关或者层级较深，使用自定义事件</li> <li>使用Vuex通讯</li></ul></li> <li>描述组件渲染和更新的过程</li> <li>描述数据绑定v-mode的实现原理</li></ul> <h1 id="vue-使用"><a href="#vue-使用" class="header-anchor">#</a> Vue 使用</h1> <ul><li>基本使用 组件使用 ---- 常用 必须会</li> <li>高级特性 ---- 不常用 可以体现深度</li> <li>Vuex 和 Vue-router 常用</li></ul> <h3 id="vue3-0出来后-vue-和-react-越来越接近"><a href="#vue3-0出来后-vue-和-react-越来越接近" class="header-anchor">#</a> Vue3.0出来后 Vue 和 React 越来越接近</h3> <ul><li>Vue3 Options API对应React Class Component</li> <li>Vue3 Composition API 对应 React Hooks</li></ul> <h3 id="vue基本使用"><a href="#vue基本使用" class="header-anchor">#</a> Vue基本使用</h3> <ul><li>插值、表达式</li> <li>指令、动态属性</li> <li>v-html: 会有 XSS 风险，会覆盖子组件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>插入值： <span class="token punctuation">{</span><span class="token punctuation">{</span> message <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token constant">JS</span> 表达式 <span class="token punctuation">{</span><span class="token punctuation">{</span> flag <span class="token operator">?</span> <span class="token string">&quot;yes&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;no&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span> （只能是表达式，不能是 js 语句）<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>一条语句执行一个动作，一个表达式产生一个值<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span>p <span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">&quot;dynamicId&quot;</span><span class="token operator">&gt;</span>动态属性 id<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p v<span class="token operator">-</span>html<span class="token operator">=</span><span class="token string">&quot;rawHtml&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>p v<span class="token operator">-</span>html<span class="token operator">=</span><span class="token string">&quot;rawHtml&quot;</span><span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>有 xss 风险<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>「注意」使用 v<span class="token operator">-</span>html 之后 将会覆盖子元素<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">&quot;hello vue&quot;</span><span class="token punctuation">,</span>
      flag<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      rawHtml<span class="token operator">:</span> <span class="token string">&quot;指令 - html &lt;b&gt;加粗&lt;/b&gt;&quot;</span><span class="token punctuation">,</span>
      dynamicId<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">id-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><ul><li>computed 有缓存， data 不变不会重新计算</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>num <span class="token punctuation">{</span><span class="token punctuation">{</span> num <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>aDouble <span class="token punctuation">{</span><span class="token punctuation">{</span> aDouble <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;aPlus&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> num<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// computed有缓存，缓存可以提高性能</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 仅读取</span>
    <span class="token function">aDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 读取和设置</span>
    aPlus<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> v <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="watch-监听"><a href="#watch-监听" class="header-anchor">#</a> watch 监听</h3> <ul><li>watch 如何深度监听</li> <li>watch 监听引用类型，拿不到oldVal，指向同一个指针</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;name&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;info.city&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;aki&quot;</span><span class="token punctuation">,</span>
      info<span class="token operator">:</span> <span class="token punctuation">{</span>
        city<span class="token operator">:</span> <span class="token string">&quot;珠海&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">oldValue<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;watch name: &quot;</span><span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 值类型，可以正常拿到 oldValue val</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    info<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">oldValue<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;watch info: &quot;</span><span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 引用类型，拿不到 oldVal 。因为指针相同，此时已经指向了新的 val</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      deep<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">// 开启深度监听可以 就可以拿到值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d27a1906e21b43ee8aef8f3d95b366a6~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h3 id="class和style"><a href="#class和style" class="header-anchor">#</a> class和style</h3> <ul><li>使用动态属性</li> <li>使用驼峰式写法</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;{ black: isBlack, yellow: isYellow }&quot;</span><span class="token operator">&gt;</span>使用 <span class="token keyword">class</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        
        <span class="token operator">&lt;</span>p <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;[black, yellow]&quot;</span><span class="token operator">&gt;</span>使用 <span class="token keyword">class</span> （数组）<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        
        <span class="token operator">&lt;</span>p <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;styleData&quot;</span><span class="token operator">&gt;</span>使用 style<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            isBlack<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            isYellow<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

            black<span class="token operator">:</span> <span class="token string">'black'</span><span class="token punctuation">,</span>
            yellow<span class="token operator">:</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span>

            styleData<span class="token operator">:</span> <span class="token punctuation">{</span>
                fontSize<span class="token operator">:</span> <span class="token string">'40px'</span><span class="token punctuation">,</span> <span class="token comment">// 转换为驼峰式</span>
                color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
                backgroundColor<span class="token operator">:</span> <span class="token string">'#ccc'</span> <span class="token comment">// 转换为驼峰式</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
    <span class="token punctuation">.</span>black <span class="token punctuation">{</span>
        background<span class="token operator">-</span>color<span class="token operator">:</span> #<span class="token number">999</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>yellow <span class="token punctuation">{</span>
        color<span class="token operator">:</span> yellow<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="v-if-v-show"><a href="#v-if-v-show" class="header-anchor">#</a> v-if &amp; v-show</h3> <ul><li><p>v-if v-else-if v-else 用法 可使用变量，也可以使用 === 表达式</p></li> <li><p>v-if 和 v-show 的区别</p> <ul><li>v-if 不会渲染</li> <li>v-show 会渲染 但是会用display: none;来隐藏</li></ul> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7966998bc3bd4ff0880849282cf0a047~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p></li> <li><p>v-if 和 v-show 的使用场景</p> <ul><li>从性能考虑，频繁销毁就是用v-show，一次性的话就是用v-if</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;type === 'a'&quot;</span><span class="token operator">&gt;</span><span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;type === 'b'&quot;</span><span class="token operator">&gt;</span><span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p v<span class="token operator">-</span><span class="token keyword">else</span><span class="token operator">&gt;</span>other<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span>p v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;type === 'a'&quot;</span><span class="token operator">&gt;</span>v<span class="token operator">-</span>show <span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>p v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">&quot;type === 'b'&quot;</span><span class="token operator">&gt;</span>v<span class="token operator">-</span>show <span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

	
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;b&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="event"><a href="#event" class="header-anchor">#</a> event</h3> <ul><li>基本使用 传参</li> <li>观察事件绑定在哪里 与react对比</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> num <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;increment1&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;increment2(2, $event)&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      num<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">increment1</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;event :&gt;&gt; &quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;event.currentTarget :&gt;&gt; &quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 注意，事件是被注册到当前元素的，和 React 不一样</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;event.__proto__ :&gt;&gt; &quot;</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token operator">++</span><span class="token punctuation">;</span>

      <span class="token comment">// 与react对比</span>
      <span class="token comment">// 1. event 是原生的</span>
      <span class="token comment">// 2. 事件被挂载到当前元素</span>
      <span class="token comment">// 和 DOM 事件一样</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">increment2</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">+=</span> val<span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'event :&gt;&gt; '</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f818826924c64a78a4c2c5744a794261~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <ul><li>事件修饰符</li></ul> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/761e7b5ca8234688947e2ca4be26ecef~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <ul><li>按键修饰符</li></ul> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af859c78846b41cc9d39c0a7d609e6be~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h3 id="表单-form"><a href="#表单-form" class="header-anchor">#</a> 表单 Form</h3> <ul><li>v-model</li> <li>常见表单项 textarea select checkbox radio</li> <li>修饰符 lazy number trim</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>输入框<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">&quot;name&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>lazy<span class="token operator">=</span><span class="token string">&quot;name&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">&quot;age&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>多行文本<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> desc <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>textarea v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;desc&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 注意，<span class="token operator">&lt;</span>textarea<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>desc<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span> 是不允许的！！！ <span class="token operator">--</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>复选框 <span class="token punctuation">{</span><span class="token punctuation">{</span> checked <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checked&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>多个复选框 <span class="token punctuation">{</span><span class="token punctuation">{</span> checkedNames <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;jack&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;Jack&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checkedNames&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;jack&quot;</span><span class="token operator">&gt;</span>Jack<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;john&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;John&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checkedNames&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;john&quot;</span><span class="token operator">&gt;</span>John<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;mike&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;Mike&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;checkedNames&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;mike&quot;</span><span class="token operator">&gt;</span>Mike<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>单选 <span class="token punctuation">{</span><span class="token punctuation">{</span> gender <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;radio&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;male&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;male&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;gender&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;male&quot;</span><span class="token operator">&gt;</span>男<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;radio&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;female&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;female&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;gender&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;female&quot;</span><span class="token operator">&gt;</span>女<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>下拉列表选择 <span class="token punctuation">{</span><span class="token punctuation">{</span> selected <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;selected&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option disabled value<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>请选择<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>下拉列表选择（多选） <span class="token punctuation">{</span><span class="token punctuation">{</span> selectedList <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;selectedList&quot;</span> multiple<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option disabled value<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>请选择<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token constant">A</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token constant">B</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>option<span class="token operator">&gt;</span><span class="token constant">C</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;consoleData&quot;</span><span class="token operator">&gt;</span>consoledata<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;aki&quot;</span><span class="token punctuation">,</span>
      age<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      desc<span class="token operator">:</span> <span class="token string">&quot;自我介绍&quot;</span><span class="token punctuation">,</span>

      checked<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      checkedNames<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

      gender<span class="token operator">:</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">,</span>

      selected<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      selectedList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">consoleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div><h3 id="vue父子组件如何通讯"><a href="#vue父子组件如何通讯" class="header-anchor">#</a> Vue父子组件如何通讯</h3> <ul><li><p>Vue组件使用</p></li> <li><p>父子组件通讯</p> <ul><li>props 父组件 -&gt; 子组件</li> <li>$emit 子组件 触发 父组件 事件</li></ul></li> <li><p>组件之间如何通讯</p> <p>通过自定义事件</p> <p>event.js</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>组件A</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> event <span class="token keyword">from</span> <span class="token string">&quot;./event&quot;</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&quot;onAddTitle&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>onAddTitle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  event<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">&quot;onAddTitle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>组件B</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> event <span class="token keyword">from</span> <span class="token string">&quot;./event&quot;</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
event<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;onAddTitle&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul> <h3 id="如何用自定义事件进行vue组件通讯"><a href="#如何用自定义事件进行vue组件通讯" class="header-anchor">#</a> 如何用自定义事件进行vue组件通讯</h3> <ul><li>new Vue实例进行通信</li> <li>event.$emit() 触发</li> <li>event.$on() 监听</li> <li>event.$off() 解绑（防止内存泄露）
事件绑定时定义了名字的函数进行绑定，方便后续解绑 销毁，防止内存泄露</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'onAdd'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>add<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'onAdd'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="生命周期调用顺序"><a href="#生命周期调用顺序" class="header-anchor">#</a> 生命周期调用顺序</h3> <h4 id="生命周期图示"><a href="#生命周期图示" class="header-anchor">#</a> 生命周期图示</h4> <p><a href="https://cn.vuejs.org/v2/api/#%E9%80%89%E9%A1%B9-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90" target="_blank" rel="noopener noreferrer">vue2.x<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>beforeCreate created</li> <li>beforeMount mounted</li> <li>beforeUpdate updated</li> <li>activated deactivated</li> <li>beforeDestroy destroyed</li> <li>errorCaptured</li></ul> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/648a8fcb8fab425f875a891173bc8162~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <p><a href="https://v3.cn.vuejs.org/guide/composition-api-lifecycle-hooks.html" target="_blank" rel="noopener noreferrer">vue3.x<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e05db749deed45edb005047e50c22dc4~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <ul><li>beforeDestroy可能要做什么？</li> <li>created和mounted有什么区别？</li></ul> <h4 id="生命周期-单个组件"><a href="#生命周期-单个组件" class="header-anchor">#</a> 生命周期（单个组件）</h4> <ul><li>挂载阶段
<ul><li>beforeCreate created</li> <li>beforeMount mounted</li></ul></li> <li>更新阶段
<ul><li>beforeUpdate updated</li></ul></li> <li>销毁阶段
<ul><li>beforeDestroy destroyed</li></ul></li></ul> <h4 id="生命周期-父子组件"><a href="#生命周期-父子组件" class="header-anchor">#</a> 生命周期（父子组件）</h4> <p>调用顺序</p> <ul><li>创建（从外到内）、渲染（从内到外）
<ul><li>beforeCreate(父)</li> <li>created(父)</li> <li>beforeMount(父)</li> <li>beforeCreate(子)</li> <li>created(子)</li> <li>beforeMount(子)</li> <li>mounted(子)</li> <li>mounte(父)</li></ul></li> <li>更新
<ul><li>父 beforeUpdate</li> <li>子 beforeUpdate</li> <li>子 updated</li> <li>父 updated</li></ul></li> <li>销毁
<ul><li>父 beforeDestroy</li> <li>子 beforeDestroy</li> <li>子 destroyed</li> <li>父 destroyed</li></ul></li></ul> <h3 id="高级特性"><a href="#高级特性" class="header-anchor">#</a> 高级特性</h3> <h4 id="自定义v-model"><a href="#自定义v-model" class="header-anchor">#</a> 自定义v-model</h4> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/020ce7111b714516a53bfe0af05331a9~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h4 id="nexttick"><a href="#nexttick" class="header-anchor">#</a> $nextTick</h4> <p><a href="https://cn.vuejs.org/v2/api/#Vue-nextTick" title="Vue.nextTick( [callback, context] )" target="_blank" rel="noopener noreferrer">Vue.nextTick( [callback, context] )<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Vue是异步渲染，data改变后，DOM不会立刻渲染，$nextTick会在DOM渲染之后被触发，以获取最新DOM节点</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 修改数据
vm.msg = 'Hello'
// DOM 还没有更新
Vue.nextTick(function () {
  // DOM 更新了
})

// 作为一个 Promise 使用 (2.1.0 起新增，详见接下来的提示)
Vue.nextTick()
  .then(function () {
    // DOM 更新了
  })
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="refs"><a href="#refs" class="header-anchor">#</a> refs</h4> <h4 id="slot"><a href="#slot" class="header-anchor">#</a> slot</h4> <ul><li>是什么：作用域插槽、具名插槽</li> <li>作用：让父组件可以往子组件中插入一段内容（不一定是字符串，可以是其他的组件，只要是符合Vue标准的组件或者标签都可以）</li></ul> <h5 id="具名插槽"><a href="#具名插槽" class="header-anchor">#</a> 具名插槽</h5> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca03524dae1c493d813db89787689d54~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h5 id="作用域插槽"><a href="#作用域插槽" class="header-anchor">#</a> 作用域插槽</h5> <p>让父组件可以访问到子组件的数据</p> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ecab56a18a84c1d8d20413ee580d666~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h4 id="动态、异步组件"><a href="#动态、异步组件" class="header-anchor">#</a> 动态、异步组件</h4> <ul><li><p>动态组件</p> <ul><li>例子：新闻页面，图文视频组件的不同排列组合
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6da64b4fdb084627a6295f36da9204a9~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></li> <li>: is=&quot;component-name&quot;用法</li> <li>需要根据数据，动态渲染的场景。即组件类型不确定。
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a63dce5a66c94fabb821f6839b089925~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></li></ul></li> <li><p>异步组件（常用）</p> <ul><li>import 函数
<ul><li><code>import CustomComponent from './index'</code>: 同步加载，打包时也是打一个包出来</li></ul></li> <li>按需加载，异步加载大组件</li></ul> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4be299cf1545412e914d55a9384badc5~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p></li></ul> <h4 id="vue如何缓存组件-keep-alive"><a href="#vue如何缓存组件-keep-alive" class="header-anchor">#</a> Vue如何缓存组件：keep-alive</h4> <ul><li>keep-alive作用
<ul><li>缓存组件</li> <li>频繁切换 不需要重复渲染</li> <li>性能优化</li></ul></li> <li>使用场景：常见的tab切换使用keep-alive</li> <li>用法</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> tab 切换 <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>KeepAliveStageA v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;state === 'A'&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> v<span class="token operator">-</span>show <span class="token operator">--</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>KeepAliveStageB v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;state === 'B'&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>KeepAliveStageC v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;state === 'C'&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>keep-alive 和 v-show的区别
<ul><li>v-show是通过css样式属性display控制 显示/隐藏 DOM</li> <li>keep-alive是vue框架层级进行的js对象的渲染（一个组件就是一个js对象）</li> <li>使用原则
<ul><li>带有层级的复杂组件，用keep-alive去包裹起来进行缓存，切换组件直接从缓存读取，大大提高性能。因为这样可以避免组件的频繁渲染销毁</li> <li>简单组件 用v-show</li></ul></li></ul></li></ul> <h4 id="vue组件如何抽离公共逻辑-mixin-vue3中的component-api是什么"><a href="#vue组件如何抽离公共逻辑-mixin-vue3中的component-api是什么" class="header-anchor">#</a> Vue组件如何抽离公共逻辑？（mixin） Vue3中的Component API是什么？</h4> <p>多个组件有相同逻辑</p> <ul><li>实现</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91cf5784ffd94451a55e7addff2cea39~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <ul><li>mixin问题
<ul><li>变量来源不明确，不利于阅读（mixin中的变量或方法再当前组件是查不到的）</li> <li>多mixin可能会造成命名冲突</li> <li>mixin和组件可能会出现多对多的关系，复杂度较高（一个组件引入多个mixin,多个组件引用一个mixin）</li></ul></li> <li>Vue3 Component API解决逻辑复用方案</li></ul> <h3 id="vuex-状态管理模式"><a href="#vuex-状态管理模式" class="header-anchor">#</a> <a href="https://vuex.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">Vuex<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <strong>状态管理模式</strong></h3> <ul><li>基本概念
<ul><li>State</li> <li>Getters</li> <li>Actions</li> <li>Mutations</li> <li>Modules</li></ul></li> <li>用于Vue组件
<ul><li>Dispatch</li> <li>Commit</li> <li>mapState</li> <li>mapGetters</li> <li>mapActions</li> <li>mapMutations</li></ul></li> <li>数据流（重点）
Actions里才能做异步操作，常用于Ajax请求</li></ul> <p>Mutations是同步操作，力求原子最小化</p> <p>进行异步操作（后端API接口数据）必须在Actions中进行，同时Actions整合多个Mutations的commit操作，Mutations是原子操作</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7babb4d7462427494bb85ce69c1e10d~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h3 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> vue-router</h3> <h4 id="路由模式-hash、h5-history"><a href="#路由模式-hash、h5-history" class="header-anchor">#</a> 路由模式（hash、H5 history）</h4> <ul><li>hash模式（默认），eg: http://abc.com/#/user/001</li> <li>H5 history模式，eg: http://abc.com/user/001
<ul><li>需要server支持，因此无特殊需求选择hash模式</li></ul></li></ul> <p>配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    mode<span class="token operator">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="路由配置-动态路由、懒加载"><a href="#路由配置-动态路由、懒加载" class="header-anchor">#</a> 路由配置（动态路由、懒加载）</h4> <ul><li>动态路由</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取参数 如： 10 20</span>
    template： <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>User <span class="token punctuation">{</span><span class="token punctuation">{</span> $route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 动态路径参数 以冒号开头，能命中 `/user/10` `/user/20` 等格式的路由</span>
        <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">'/user/:id'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> User <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>懒加载</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/A'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            path<span class="token operator">:</span> <span class="token string">'/B'</span><span class="token punctuation">,</span>
            <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/B'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="vue-原理"><a href="#vue-原理" class="header-anchor">#</a> Vue 原理</h1> <h3 id="组件化"><a href="#组件化" class="header-anchor">#</a> 组件化？</h3> <h3 id="如何理解mvvm"><a href="#如何理解mvvm" class="header-anchor">#</a> 如何理解MVVM</h3> <p>过去是通过操作DOM来实现网页的更新显示，现在是通过监听数据变化，驱动修改DOM</p> <p>React和Vue都是这个模型</p> <ul><li>M：Model 数据，组件中的data，或者是Vuex里的数据</li> <li>V：View 看到的视图</li> <li>VM: ViewModel 沟通 model 和 view 的桥梁，监听事件，监听指令，
<ul><li>View 点击事件 各种DOM事件 ViewModel监听到 触发修改Model</li> <li>Model数据修改后，ViewModel Directives 重新渲染</li></ul></li></ul> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85fc82ee4b7f40709103827c2d97c2e5~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h3 id="监听数据变化的核心api-实现响应式"><a href="#监听数据变化的核心api-实现响应式" class="header-anchor">#</a> 监听数据变化的核心API(实现响应式)</h3> <h4 id="object-defineproperty"><a href="#object-defineproperty" class="header-anchor">#</a> Object.defineProperty</h4> <ul><li>通过该API来监听数据，如果有变化，立刻触发视图渲染</li> <li>缺点
<ul><li>深度监听，递归，一次性计算量大</li> <li>无法监听新增、删除属性（Vue.set Vue.delete）</li> <li>无法监听数组，需要特殊处理</li></ul></li></ul> <p>基本用法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> object1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>object1<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		name <span class="token operator">=</span> newVal<span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;监听到name修改 set new value: &quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

object1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;haha&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>object1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// https://codepen.io/huangzonggui/pen/ExvMpYO</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h5 id="监听对象-深度监听data变化"><a href="#监听对象-深度监听data变化" class="header-anchor">#</a> 监听对象（深度监听data变化）</h5> <h5 id="监听数组变化"><a href="#监听数组变化" class="header-anchor">#</a> 监听数组变化</h5> <ol><li>通过Object.create(Array.prototype)重新定义数组原型
<ul><li>Ojbect.create创建的对象 原型指向Array.prototype，扩展该对象方法，不会污染原数组
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/07153dbf55b44ce6b7ecb41d34f4ec2e~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></li></ul></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>判断监听的数据类型如果是数组，将监听对象的隐式原型修改为重新定义的数组原型</li></ol> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8dc12ea920df4528a104a38e44fd865d~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h4 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h4> <ul><li><p>Vue3采用Proxy 来监听数据变化</p></li> <li><p>缺点</p> <ul><li>Proxy浏览器兼容性不好，且不可以polyfill</li></ul></li></ul> <h3 id="vdom-和-diff"><a href="#vdom-和-diff" class="header-anchor">#</a> <code>vdom</code> 和 <code>diff</code></h3> <h4 id="vdom-virtual-dom"><a href="#vdom-virtual-dom" class="header-anchor">#</a> vdom(virtual DOM)</h4> <ul><li>操作DOM耗费性能</li> <li>jQuery是通过控制操作DOM的时机，手动调整</li> <li>vue 和 react 是通过数据驱动视图，修改数据，计算出最小改变的DOM，再一次性修改，减少计算</li></ul> <p>如何计算最小变化</p> <ul><li>因为JS计算快，所以可以通过将操作DOM的频繁变更转移到计算JS中</li> <li>用JS模拟DOM，构建出一棵Virtual DOM树，通过js来计算最小变更</li> <li>最后一次性修改操作DOM</li></ul> <p>JS 模拟DOM的结构（vnode）</p> <ul><li>tag</li> <li>props （className style id 事件等）</li> <li>childrens（子节点 数组 字符串）</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/072c5c5f3b944bd0a439cdea22a9e891~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <p>模拟上图的DOM结构</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    tag<span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'div1'</span><span class="token punctuation">,</span>
        className<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'container'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            tag<span class="token operator">:</span> <span class="token string">'p'</span><span class="token punctuation">,</span>
            children<span class="token operator">:</span> <span class="token string">'vdom'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            tag<span class="token operator">:</span> <span class="token string">'ul'</span><span class="token punctuation">,</span>
            props<span class="token operator">:</span> <span class="token punctuation">{</span>
                style<span class="token operator">:</span> <span class="token string">'font-size: 20px'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            children<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    tag<span class="token operator">:</span> <span class="token string">'li'</span><span class="token punctuation">,</span>
                    children<span class="token operator">:</span> <span class="token string">'a'</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h5 id="通过-snabbdom-学习虚拟dom"><a href="#通过-snabbdom-学习虚拟dom" class="header-anchor">#</a> 通过 <a href="https://github.com/snabbdom/snabbdom" target="_blank" rel="noopener noreferrer">snabbdom<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 学习虚拟DOM</h5> <blockquote><p>A virtual DOM library with focus on simplicity, modularity, powerful features and performance.</p></blockquote> <ul><li>简洁强大的vdom</li> <li>Vue 参考它实现vdom和diff</li> <li>snabbdom代码的解析</li> <li>重点
<ul><li>h函数</li> <li>vnode(virtual node 虚拟节点)的数据结构</li> <li>patch函数</li></ul></li></ul> <p><code>snabbdom</code>源码上vnode的数据结构</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">VNode</span> <span class="token punctuation">{</span>
  sel<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  data<span class="token operator">:</span> VNodeData <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>VNode <span class="token operator">|</span> <span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  elm<span class="token operator">:</span> Node <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  text<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  key<span class="token operator">:</span> Key <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">VNodeData</span> <span class="token punctuation">{</span>
  props<span class="token operator">?</span><span class="token operator">:</span> Props<span class="token punctuation">;</span>
  attrs<span class="token operator">?</span><span class="token operator">:</span> Attrs<span class="token punctuation">;</span>
  <span class="token keyword">class</span><span class="token operator">?</span><span class="token operator">:</span> Classes<span class="token punctuation">;</span>
  style<span class="token operator">?</span><span class="token operator">:</span> VNodeStyle<span class="token punctuation">;</span>
  dataset<span class="token operator">?</span><span class="token operator">:</span> Dataset<span class="token punctuation">;</span>
  on<span class="token operator">?</span><span class="token operator">:</span> On<span class="token punctuation">;</span>
  hero<span class="token operator">?</span><span class="token operator">:</span> Hero<span class="token punctuation">;</span>
  attachData<span class="token operator">?</span><span class="token operator">:</span> AttachData<span class="token punctuation">;</span>
  hook<span class="token operator">?</span><span class="token operator">:</span> Hooks<span class="token punctuation">;</span>
  key<span class="token operator">?</span><span class="token operator">:</span> Key<span class="token punctuation">;</span>
  ns<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// for SVGs</span>
  fn<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> VNode<span class="token punctuation">;</span> <span class="token comment">// for thunks</span>
  args<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// for thunks</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span> <span class="token comment">// for any other 3rd party module</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="diff算法"><a href="#diff算法" class="header-anchor">#</a> diff算法</h3> <ul><li>diff 算法是vdom的核心、最关键部分</li> <li>diff 算法能在日常使用Vue React中体现出来（for 循环体中的 key 重要性）</li> <li>diff即对比差异 是一个广泛的概念，如linux diff命令，git diff等
<ul><li>两个js对象也可以做diff，如：https://github.com/cujojs/jiff</li> <li>两课数做diff，如vdom dif</li></ul></li></ul> <p><strong>对比两颗树的差异</strong></p> <ul><li>一般做法
<ul><li>遍历tree1</li> <li>遍历tree2</li> <li>排序
<ul><li>时间复杂度O(n^3)，1000个节点，计算1亿次，算法不可用</li></ul></li></ul></li> <li>优化时间复杂度为O(n)
<ul><li>只比较同一等级</li> <li>如果<code>tag</code>不同，则直接删除重建，不做深度比较</li> <li>如果<code>tag</code>和<code>key</code>都相同，则认为是相同节点，不做深度比较</li></ul></li></ul> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f48a249eb5b401fba5f7192eba8502c~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23de7a7837a84e6388a273210fbc0084~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <h4 id="源码"><a href="#源码" class="header-anchor">#</a> 源码</h4> <p>看源码，主要<strong>找到核心函数</strong>，<code>h()</code> <code>patch()</code>等，看它的<strong>参数</strong>、<strong>返回值</strong>和<strong>主要逻辑</strong>，不需要过于抠细枝末节</p> <ul><li><p><code>h</code>函数：helper function for creating vnodes</p></li> <li><p><code>patch</code>函数(调用patchVnode)：</p> <blockquote><p>The <code>patch</code> function returned by <code>init</code> takes two arguments. The first is a DOM element or a vnode representing the current view. The second is a vnode representing the new, updated view.</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">patch</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> newVnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e01237332aa348cf92bcd0856b03dea3~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p> <ul><li>patch函数逻辑
<ul><li>第一个参数不是 <code>vnode</code> <ul><li>第一个参数是DOM Element(DOM元素)， 创建一个空的 <code>vnode</code> 关联到这个 DOM 元素上</li></ul></li> <li>第一个参数是<code>vnode</code>，调用<code>sameNode</code>判断<code>vnode</code>是否相同<div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">sameVnode</span> <span class="token punctuation">(</span><span class="token parameter">vnode1<span class="token operator">:</span> VNode<span class="token punctuation">,</span> vnode2<span class="token operator">:</span> VNode</span><span class="token punctuation">)</span><span class="token operator">:</span> boolean <span class="token punctuation">{</span>
      <span class="token comment">// key 和 sel 都相等</span>
      <span class="token comment">// undefined === undefined // true</span>
      <span class="token keyword">return</span> vnode1<span class="token punctuation">.</span>key <span class="token operator">===</span> vnode2<span class="token punctuation">.</span>key <span class="token operator">&amp;&amp;</span> vnode1<span class="token punctuation">.</span>sel <span class="token operator">===</span> vnode2<span class="token punctuation">.</span>sel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>相同的 vnode(<code>key</code>和<code>sel</code>都相等)：vnode 对比（<code>patchVnode</code>）</li> <li>不同的 vnode，直接删除重建</li></ul></li></ul></li></ul></li> <li><p><code>patchVnode (oldVnode: VNode, vnode: VNode, insertedVnodeQueue: VNodeQueue)</code>函数(调用updateChildren)：对比两个节点，如果不同，</p> <ul><li>节点相同，返回</li> <li>节点不同(主要看<code>text</code>或<code>children</code>，二选一，也就是有子节点，或者有字符串)
<ul><li>text没有值（一般children有值）
<ul><li>新旧节点都有<code>children</code>,调用 <code>updateChildren</code></li> <li>新节点有<code>children</code>，旧节点无<code>children</code>，添加（调用 <code>addVnodes</code>）</li> <li>旧节点有<code>children</code>，新节点无<code>children</code>，删除children (调用<code>removeVnodes</code>）</li></ul></li> <li>text有值（一般children无值）
<ul><li>将新的<code>text</code>替换旧的<code>text</code></li></ul></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">function</span> <span class="token function">patchVnode</span> <span class="token punctuation">(</span><span class="token parameter">oldVnode<span class="token operator">:</span> VNode<span class="token punctuation">,</span> vnode<span class="token operator">:</span> VNode<span class="token punctuation">,</span> insertedVnodeQueue<span class="token operator">:</span> VNodeQueue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 执行 prepatch hook</span>
    <span class="token keyword">const</span> hook <span class="token operator">=</span> vnode<span class="token punctuation">.</span>data<span class="token operator">?.</span>hook<span class="token punctuation">;</span>
    hook<span class="token operator">?.</span>prepatch<span class="token operator">?.</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置 vnode.elem</span>
    <span class="token keyword">const</span> elm <span class="token operator">=</span> vnode<span class="token punctuation">.</span>elm <span class="token operator">=</span> oldVnode<span class="token punctuation">.</span>elm<span class="token operator">!</span><span class="token punctuation">;</span>

    <span class="token comment">// 旧 children</span>
    <span class="token keyword">let</span> oldCh <span class="token operator">=</span> oldVnode<span class="token punctuation">.</span>children <span class="token keyword">as</span> VNode<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 新 children</span>
    <span class="token keyword">let</span> ch <span class="token operator">=</span> vnode<span class="token punctuation">.</span>children <span class="token keyword">as</span> VNode<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldVnode <span class="token operator">===</span> vnode<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

    <span class="token comment">// hook 相关</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>data <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// cbs: callbacks</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cbs<span class="token punctuation">.</span>update<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> cbs<span class="token punctuation">.</span>update<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
      vnode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>hook<span class="token operator">?.</span>update<span class="token operator">?.</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// vnode.text === undefined （vnode.children 一般有值）</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 新旧都有 children</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isDef</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCh <span class="token operator">!==</span> ch<span class="token punctuation">)</span> <span class="token function">updateChildren</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> oldCh<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 新 children 有，旧 children 无 （旧 text 有）</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 清空 text</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> api<span class="token punctuation">.</span><span class="token function">setTextContent</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 添加 children</span>
        <span class="token function">addVnodes</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> ch<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> ch<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> insertedVnodeQueue<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 旧 child 有，新 child 无</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 移除 children</span>
        <span class="token function">removeVnodes</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> oldCh<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> oldCh<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 旧 text 有</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        api<span class="token punctuation">.</span><span class="token function">setTextContent</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

    <span class="token comment">// else : vnode.text !== undefined （vnode.children 无值）</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>oldVnode<span class="token punctuation">.</span>text <span class="token operator">!==</span> vnode<span class="token punctuation">.</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 移除旧 children</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>oldCh<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">removeVnodes</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> oldCh<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> oldCh<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 设置新 text </span>
      api<span class="token punctuation">.</span><span class="token function">setTextContent</span><span class="token punctuation">(</span>elm<span class="token punctuation">,</span> vnode<span class="token punctuation">.</span>text<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    hook<span class="token operator">?.</span>postpatch<span class="token operator">?.</span><span class="token punctuation">(</span>oldVnode<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div></li> <li><p><code>addVnodes</code>、<code>removeVnodes</code></p></li> <li><p><code>updateChildren</code>函数：四个首尾部指针对比，指针慢慢往中间移动，直到指针相遇，循环结束</p> <ul><li>当遇到相同的节点，就会移动指针，这样做，循环体中的节点，如果没有变化，不需要重新渲染</li> <li>当没有遇到相同的节点
<ul><li>判断<code>key</code>是否相同
<ul><li>不同，则是新的节点，插入</li> <li>相同，则判断sel(内容)是否相等
<ul><li>相等则是旧的节点，直接移动，不用生成新的节点</li> <li>不相等，生成新的节点
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/506d3be66eb04fb1a09f4b8eb7738686~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></li></ul></li></ul></li></ul></li> <li><code>key</code>的重要性
<ul><li>当不传key时，会全部删除重建</li> <li>当传index作为key时，会有排序的变化，例如，之前是0的元素排到第一位，也会出现问题</li> <li>传入业务id作为key，直接移动
<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b39999eba2445a693c721eb2caa9ab7~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></li></ul></li></ul> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/28ebcf49dd2f47f9a81d72d7d011f451~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p></li></ul> <h3 id="模板编译"><a href="#模板编译" class="header-anchor">#</a> 模板编译</h3> <ul><li>with语法</li> <li>模板编译成render函数</li> <li>执行render函数生成vnode</li></ul> <h3 id="渲染过程"><a href="#渲染过程" class="header-anchor">#</a> 渲染过程</h3> <ul><li>初次渲染过程</li> <li>更新过程</li> <li>异步渲染</li></ul> <h3 id="前端路由原理"><a href="#前端路由原理" class="header-anchor">#</a> 前端路由原理</h3> <p>路由模式</p> <ul><li>H5 history</li> <li>hash</li></ul> <p>选择</p> <ul><li>toB系统，简单易用，推荐使用hash路由，对url规范不敏感</li> <li>toC系统，考虑选择H5 history，需要服务端支持</li> <li>能选择简单的就不要选择复杂的，考虑成本和收益</li></ul> <h4 id="hash"><a href="#hash" class="header-anchor">#</a> hash</h4> <p><strong>window.onhashchange</strong></p> <blockquote><p>当 一个窗口的 hash （URL 中 # 后面的部分）改变时就会触发 <strong>hashchange</strong> 事件</p></blockquote> <p>url#号后面的部分</p> <ul><li>hash变化，会触发路由的跳转，前进后退</li> <li>hash不会触发页面的刷新，这个是single page app(SPA)特点</li> <li>hash跟服务器无关，不会提交到后台</li></ul> <p>通过hash变化触发路由的跳转，后退，触发视图的渲染</p> <p>修改hash方式</p> <ul><li>通过JS location.href=#user 来修改hash值</li> <li>通过手动修改浏览器地址栏的hash值</li> <li>通过浏览器的前进、后退</li></ul> <h4 id="h5-history"><a href="#h5-history" class="header-anchor">#</a> H5 history</h4> <p>用url规范的路由，但跳转不刷新页面</p> <p>常规路由</p> <ul><li>http://github.com/xxx            刷新页面</li> <li>http://github.com/xxx/yyy        刷新页面</li> <li>http://github.com/xxx/yyy/zzz    刷新页面</li></ul> <p>H5 history路由</p> <ul><li>http://github.com/xxx            刷新页面</li> <li>http://github.com/xxx/yyy        前端跳转，不刷新页面</li> <li>http://github.com/xxx/yyy/zzz    前端跳转，不刷新页面</li></ul> <p>实现的api</p> <ul><li><strong><code>history.pushState()</code></strong>  方法向当前浏览器会话的历史堆栈中添加一个状态<div class="language- line-numbers-mode"><pre class="language-text"><code>history.pushState(state, title[, url])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><code>window.onpopstate</code>是<code>popstate</code>事件在window对象上的事件处理程序.</li></ul> <p>H5 history 需要后端配合</p> <ul><li>无论你访问什么页面，都返回index.html这个路由</li> <li>然后再由前端通过history.pushState()的方式除触发路由的切换</li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/7/2021, 4:11:43 AM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#vue3-0出来后-vue-和-react-越来越接近" class="sidebar-link reco-side-vue3-0出来后-vue-和-react-越来越接近" data-v-70334359>Vue3.0出来后 Vue 和 React 越来越接近</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#vue基本使用" class="sidebar-link reco-side-vue基本使用" data-v-70334359>Vue基本使用</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#watch-监听" class="sidebar-link reco-side-watch-监听" data-v-70334359>watch 监听</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#class和style" class="sidebar-link reco-side-class和style" data-v-70334359>class和style</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#v-if-v-show" class="sidebar-link reco-side-v-if-v-show" data-v-70334359>v-if &amp; v-show</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#event" class="sidebar-link reco-side-event" data-v-70334359>event</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#表单-form" class="sidebar-link reco-side-表单-form" data-v-70334359>表单 Form</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#vue父子组件如何通讯" class="sidebar-link reco-side-vue父子组件如何通讯" data-v-70334359>Vue父子组件如何通讯</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#如何用自定义事件进行vue组件通讯" class="sidebar-link reco-side-如何用自定义事件进行vue组件通讯" data-v-70334359>如何用自定义事件进行vue组件通讯</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#生命周期调用顺序" class="sidebar-link reco-side-生命周期调用顺序" data-v-70334359>生命周期调用顺序</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#高级特性" class="sidebar-link reco-side-高级特性" data-v-70334359>高级特性</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#vuex-状态管理模式" class="sidebar-link reco-side-vuex-状态管理模式" data-v-70334359>Vuex 状态管理模式</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#vue-router" class="sidebar-link reco-side-vue-router" data-v-70334359>vue-router</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#组件化" class="sidebar-link reco-side-组件化" data-v-70334359>组件化？</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#如何理解mvvm" class="sidebar-link reco-side-如何理解mvvm" data-v-70334359>如何理解MVVM</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#监听数据变化的核心api-实现响应式" class="sidebar-link reco-side-监听数据变化的核心api-实现响应式" data-v-70334359>监听数据变化的核心API(实现响应式)</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#vdom-和-diff" class="sidebar-link reco-side-vdom-和-diff" data-v-70334359>vdom 和 diff</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#diff算法" class="sidebar-link reco-side-diff算法" data-v-70334359>diff算法</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#模板编译" class="sidebar-link reco-side-模板编译" data-v-70334359>模板编译</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#渲染过程" class="sidebar-link reco-side-渲染过程" data-v-70334359>渲染过程</a></li><li class="level-3" data-v-70334359><a href="/blogs/FE/2021/113001.html#前端路由原理" class="sidebar-link reco-side-前端路由原理" data-v-70334359>前端路由原理</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.a75dbc90.js" defer></script><script src="/assets/js/3.d0bbcc43.js" defer></script><script src="/assets/js/1.336ca81d.js" defer></script><script src="/assets/js/18.dc22300f.js" defer></script>
  </body>
</html>
