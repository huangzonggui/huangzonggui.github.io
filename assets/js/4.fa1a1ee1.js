(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{556:function(t,s,a){t.exports=a.p+"assets/img/2021-12-11-10-08-49.c54bdddd.png"},557:function(t,s,a){t.exports=a.p+"assets/img/2021-12-11-10-01-06.d08454e8.png"},558:function(t,s,a){t.exports=a.p+"assets/img/2021-12-11-10-01-35.df0dd1f6.png"},559:function(t,s,a){t.exports=a.p+"assets/img/2022-02-20-10-15-09.70a529ed.png"},560:function(t,s,a){t.exports=a.p+"assets/img/2022-02-20-10-13-01.935d05bb.png"},561:function(t,s,a){t.exports=a.p+"assets/img/2022-02-20-10-30-41.a3c74d8a.png"},562:function(t,s,a){t.exports=a.p+"assets/img/2022-02-19-21-13-55.826975b2.png"},563:function(t,s,a){t.exports=a.p+"assets/img/2022-02-19-21-18-04.43d47377.png"},564:function(t,s,a){t.exports=a.p+"assets/img/2022-02-19-21-30-04.f8585a74.png"},565:function(t,s,a){t.exports=a.p+"assets/img/2022-02-19-18-09-32.e16f3b4a.png"},566:function(t,s,a){t.exports=a.p+"assets/img/2022-02-19-18-09-58.055dc06b.png"},567:function(t,s,a){t.exports=a.p+"assets/img/2022-02-19-19-05-01.17d1b0b1.png"},568:function(t,s,a){t.exports=a.p+"assets/img/2022-02-19-20-53-07.5129d227.png"},569:function(t,s,a){t.exports=a.p+"assets/img/2022-02-19-21-05-16.1dfcfed1.png"},602:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"性能检测"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#性能检测"}},[t._v("#")]),t._v(" 性能检测")]),t._v(" "),n("p",[t._v("准备")]),t._v(" "),n("ul",[n("li",[t._v("Chrome Canary 版的浏览器，Chrome Canary 是采用最新技术构建的，它的开发者工具和浏览器特性都是最新的，推荐使用 Chrome Canary 来做性能分析。")]),t._v(" "),n("li",[t._v("隐身模式 （防止插件、cookie、缓存干扰）")])]),t._v(" "),n("h2",{attrs:{id:"lighthouse"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lighthouse"}},[t._v("#")]),t._v(" Lighthouse")]),t._v(" "),n("p",[t._v("chrome v83.0.4103.61 的 Audits 升级成 Lighthouse 了")]),t._v(" "),n("p",[t._v("检测内容")]),t._v(" "),n("ul",[n("li",[t._v("监测并分析 Web 性能 (Performance)；")]),t._v(" "),n("li",[t._v("监测并分析 PWA(Progressive Web App) 程序的性能；")]),t._v(" "),n("li",[t._v("监测并分析 Web 应用是否采用了最佳实践策略 (Best practices)；")]),t._v(" "),n("li",[t._v("监测并分析是否实施了无障碍功能 (Accessibility)，无障碍功能让一些身体有障碍的人可以方便地浏览你的 Web 应用。监测并分析 Web 应用是否采实施了 SEO 搜素引擎优化 (SEO)。")])]),t._v(" "),n("p",[t._v("测试报告例子\n"),n("img",{attrs:{src:a(556),alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:a(557),alt:""}})]),t._v(" "),n("p",[n("img",{attrs:{src:a(558),alt:""}})]),t._v(" "),n("p",[t._v("各个指标含义")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("首次内容绘制(First Contentful Paint)\n"),n("a",{attrs:{href:"https://web.dev/i18n/zh/fcp/",target:"_blank",rel:"noopener noreferrer"}},[t._v("图片来源"),n("OutboundLink")],1),t._v(" "),n("img",{attrs:{src:a(559),alt:""}}),t._v(" "),n("img",{attrs:{src:a(560),alt:""}})])]),t._v(" "),n("li",[n("p",[t._v("完全可交互时间 (Time to Interactive)；")])]),t._v(" "),n("li",[n("p",[t._v("速度指标（Speed Index）。衡量了首屏可见内容绘制在屏幕上的速度。\n在首次加载页面的过程中尽量展现更多的内容，往往能给用户带来更好的体验，所以速度指标的值约小越好。")])]),t._v(" "),n("li",[n("p",[t._v("阻塞总时间（Total Blocking Time）：测量的是 "),n("code",[t._v("FCP")]),t._v(" 与 "),n("code",[t._v("TTI")]),t._v(" 之间的"),n("code",[t._v("时间间隔")]),t._v("。这个指标反映了用户的交互"),n("strong",[t._v("是否能及时响应")]),t._v("。 如果主线程执行了长任务会导致用户的输入无法及时响应。\n当主线执行的任务所需的时长超过 "),n("code",[t._v("50ms")]),t._v("，我们就认为这是一个长任务（"),n("code",[t._v("long task")]),t._v("）。假设在主线程上执行了一系列的任务，每个长任务的阻塞时间等于执行时间减去 50 ms，最后可以统计得到一个总的阻塞时间。")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/376925215",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://web.dev/tbt/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://web.dev/tbt/"),n("OutboundLink")],1),t._v(" "),n("img",{attrs:{src:a(561),alt:""}})])])]),t._v(" "),n("li",[n("p",[t._v("最大内容绘制(Largest Contentful Paint): 当首屏内容完全绘制完成时，我们把这个时间点称为 Largest Content Paint，简称 LCP。")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://web.dev/i18n/zh/lcp/#lcp-4",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),n("OutboundLink")],1)])])])]),t._v(" "),n("h1",{attrs:{id:"性能优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[t._v("#")]),t._v(" 性能优化")]),t._v(" "),n("p",[t._v("思考: 如果下载 CSS 文件阻塞了，会阻塞 DOM 树的合成吗？会阻塞页面的显示吗？")]),t._v(" "),n("p",[t._v("不会影响 DOM 树的合成，但是会阻塞 DOM 树的渲染显示。\n所以为了避免用户看到长时间的白屏，应该尽快提高 CSS 的加载速度。")]),t._v(" "),n("ol",[n("li",[t._v("使用CDN；")]),t._v(" "),n("li",[t._v("CSS的压缩（使用webpack、gulp等打包工具）；")]),t._v(" "),n("li",[t._v("合理使用缓存（设置缓存控制、表达式和e-tag）；\nDOM 解析和 CSS 解析是两个"),n("strong",[t._v("并行的")]),t._v("过程，所以这也解释了为什么CSS加载不会阻塞DOM解析。\n但是因为 "),n("code",[t._v("render tree")]),t._v(" "),n("strong",[t._v("依赖于")]),t._v(" "),n("code",[t._v("DOM")]),t._v(" 树和 "),n("code",[t._v("cssom")]),t._v(" 树，所以必须等到 cssom 树构建完成，也就是 CSS 资源加载完成。")])]),t._v(" "),n("h2",{attrs:{id:"页面性能-如何系统地优化页面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#页面性能-如何系统地优化页面"}},[t._v("#")]),t._v(" 页面性能：如何系统地优化页面？")]),t._v(" "),n("p",[n("strong",[t._v("重排(reflow, 也叫回流)：更新了元素的几何属性")]),t._v("\n修改了宽高位置等，导致需要重新布局。\n"),n("img",{attrs:{src:a(562),alt:""}})]),t._v(" "),n("p",[t._v("触发重排的情况：")]),t._v(" "),n("ul",[n("li",[t._v("添加或删除可见 DOM 元素")]),t._v(" "),n("li",[t._v("改变浏览器窗口尺寸。如 resize 事件")]),t._v(" "),n("li",[t._v("激活伪类。如 :hover")]),t._v(" "),n("li",[t._v("改变元素尺寸："),n("code",[t._v("width、height、line-height、min-height、border-width、border")])]),t._v(" "),n("li",[n("code",[t._v("font-size")])]),t._v(" "),n("li",[n("code",[t._v("margin、padding")])]),t._v(" "),n("li",[t._v("改变元素位置："),n("code",[t._v("position、overflow、left、right、bottom、top、text-align")])]),t._v(" "),n("li",[n("code",[t._v("offsetWidth、offsetHeight")])])]),t._v(" "),n("p",[n("strong",[t._v("重绘：更新绘制属性。元素的外观")])]),t._v(" "),n("p",[t._v("触发重绘的情况：")]),t._v(" "),n("ul",[n("li",[t._v("color")]),t._v(" "),n("li",[t._v("border-style")]),t._v(" "),n("li",[t._v("visibility")]),t._v(" "),n("li",[t._v("background")]),t._v(" "),n("li",[t._v("text-decoration")]),t._v(" "),n("li",[t._v("background-image")]),t._v(" "),n("li",[t._v("background-position")]),t._v(" "),n("li",[t._v("background-repeat")]),t._v(" "),n("li",[t._v("outline-color")]),t._v(" "),n("li",[t._v("outline")]),t._v(" "),n("li",[t._v("outline-style")]),t._v(" "),n("li",[t._v("border-radius")]),t._v(" "),n("li",[t._v("outline-width")]),t._v(" "),n("li",[t._v("box-shadow")]),t._v(" "),n("li",[t._v("background-size")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(563),alt:""}})]),t._v(" "),n("p",[n("strong",[t._v("合成")])]),t._v(" "),n("p",[t._v("CSS 的 "),n("code",[t._v("transform")]),t._v(" 来实现动画效果。\n直接在非主线程上执行合成动画操作。因为是在非主线程上合成，并没有占用主线程的资源")]),t._v(" "),n("p",[n("img",{attrs:{src:a(564),alt:""}})]),t._v(" "),n("p",[t._v("减少重排重绘")]),t._v(" "),n("ul",[n("li",[t._v("使用 class 操作样式，而不是频繁操作 style")]),t._v(" "),n("li",[t._v("批量操作 dom，例如使用 createDocumentFragment 生成片段，统一插入删除。或者使用框架，react，VDom，diff 算法有效避免频繁的 DOM 操作")]),t._v(" "),n("li",[t._v("Debounce window resize 事件。防抖：控制触发事件的频率")])]),t._v(" "),n("h3",{attrs:{id:"加载阶段-白屏优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#加载阶段-白屏优化"}},[t._v("#")]),t._v(" 加载阶段 白屏优化")]),t._v(" "),n("p",[t._v("首屏时间标准\n2秒内优秀，5秒内可以接受，10秒用户就难以接受")]),t._v(" "),n("blockquote",[n("p",[t._v("如果“首屏时间”在2秒以内是比较优秀的，5秒以内用户可以接受，10秒以上就不可容忍了。")])]),t._v(" "),n("p",[t._v("首屏和白屏的区别")]),t._v(" "),n("ul",[n("li",[t._v("白屏时间：用户进入网站，一直到有内容展示的时间节点\n"),n("ul",[n("li",[t._v("DNS 查询、建立 TCP 链接、发起第一个HTTP请求、返回 HTML 文档、HTML 文档 Head 解析完毕")]),t._v(" "),n("li",[t._v("计算")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v("\t"),n("span",{pre:!0,attrs:{class:"token doctype"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),n("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("白屏"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不兼容performance.timing 的浏览器，如IE8")]),t._v("\n\t\twindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageStartTime "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 页面 CSS 资源 --\x3e")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("common.css"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("stylesheet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("page.css"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 白屏时间\b结束点")]),t._v("\n\t\twindow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstPaint "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Date"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 页面内容 --\x3e")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br")])]),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("  ```js\n  \t// 支持 Performance API\n  \tfirstPaint =  firstPaintEnd - performance.timing.navigationStart;\n\n  \t// 不支持 Performance API，在 `page onload` 中计算结束时间 \n  \t window.onload = () => {\n  \t\tfirstPaintEnd = Date.now();\n  \t }\n  \tfirstPaint =  firstPaintEnd - pageStartTime;\n  ```\n")])])])]),t._v(" "),n("li",[t._v("首屏时间 = 白屏时间 + 首屏渲染时间")])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://976500133.gitbooks.io/frontendbook/content/http/http-white.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("首屏和白屏时间计算"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("加载阶段渲染流水线\n"),n("img",{attrs:{src:a(565),alt:""}}),t._v(" "),n("img",{attrs:{src:a(566),alt:""}})]),t._v(" "),n("p",[t._v("影响白屏主要瓶颈")]),t._v(" "),n("ul",[n("li",[t._v("下载 CSS")]),t._v(" "),n("li",[t._v("下载 JavaScript")]),t._v(" "),n("li",[t._v("执行 JavaScript")])]),t._v(" "),n("p",[t._v("能阻塞网页首次渲染的资源（HTML、JavaScript、CSS）称为"),n("code",[t._v("关键资源")]),t._v("。核心要素")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("关键资源的个数")])]),t._v(" "),n("li",[n("p",[t._v("关键资源的大小")])]),t._v(" "),n("li",[n("p",[t._v("请求关键资源需要多少个RTT(Round Trip Time)。"),n("code",[t._v("使用 CDN 来减少每次 RTT 时长")])]),t._v(" "),n("blockquote",[n("p",[t._v("当使用 TCP 协议传输一个文件时，比如这个文件大小是 0.1M，由于 TCP 的特性，\n这个数据并不是一次传输到服务端的，而是需要拆分成一个个数据包来回多次进行传输的。RTT 就是这里的往返时延。\n它是网络中一个重要的性能指标，表示从发送端发送数据开始，到发送端收到来自接收端的确认，总共经历的时延。\n通常 1 个 HTTP 的数据包在 14KB 左右，所以 1 个 0.1M 的页面就需要拆分成 8 个包来传输了，也就是说需要 8 个 RTT。")])]),t._v(" "),n("blockquote",[n("p",[t._v("由于渲染引擎有一个预解析的线程，在接收到 HTML 数据之后，预解析线程会快速扫描 HTML 数据中的关键资源，一旦扫描到了，\n会立马发起请求，你可以认为 JavaScript 和 CSS 是同时发起请求的，所以它们的请求是重叠的，那么计算它们的 RTT 时，\n只需要计算体积最大的那个数据就可以了")])])])]),t._v(" "),n("p",[t._v("缩短白屏时长")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("可以内联 JS 和 CSS，移除下载")])]),t._v(" "),n("li",[n("p",[t._v("减少文件大小。")]),t._v(" "),n("ul",[n("li",[t._v("服务器设置开启 gzip。eg: Nginx开启Gzip压缩")]),t._v(" "),n("li",[t._v("通过 webpack 移除一些注释，压缩JS 和 CSS")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n* @file webpack.config.js, 只保留了关键部分的配置.\n*/")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tloaders"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\ttest"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.css$")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除 CSS 内注释")]),t._v("\n\tloader"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ExtractTextPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("extract")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-style'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css?'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"discardComments":{"removeAll":true}}\'')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nplugins"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UglifyJsPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\toutput"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除 JavaScript 内注释")]),t._v("\n\t\tcomments"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HtmlWebpackPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tminify"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 移除 HTML 内注释")]),t._v("\n\t\tremoveComments"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br")])]),n("ul",[n("li",[t._v("抽离和压缩 CSS(mini-css-extract-plugin)")]),t._v(" "),n("li",[t._v("接入treeShaking，剔除无用代码")]),t._v(" "),n("li",[t._v("webpack 开启 Scope hosting（作用域提升）")])])]),t._v(" "),n("li",[n("p",[t._v("CDN 加快下载速度")])]),t._v(" "),n("li",[n("p",[t._v("将不需要解析 HTML 阶段使用的 JavaScript 标记上 async 或者 defer")]),t._v(" "),n("ul",[n("li",[t._v("defer: 异步下载，在所有"),n("code",[t._v("元素解析完成之后(HTML parser)")]),t._v("，"),n("code",[t._v("DOMContentLoaded 事件触发之前")]),t._v("执行。多个标记了 defer 的 JavaScript 有先后顺序")]),t._v(" "),n("li",[t._v("async: 异步下载，下载完就会执行。多个标记了 async 的 JavaScript 不分先后顺序")]),t._v(" "),n("li",[t._v("主要区别：下载完何时执行")])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://segmentfault.com/q/1010000000640869",target:"_blank",rel:"noopener noreferrer"}},[t._v("defer和async的区别"),n("OutboundLink")],1),t._v(" "),n("img",{attrs:{src:a(567),alt:""}})]),t._v(" "),n("p",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000006778717",target:"_blank",rel:"noopener noreferrer"}},[t._v("此文章提到兼容性问题，提到上图不够严谨"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[t._v("script 放在 body 后面，也不会阻塞构建 DOM 树")]),t._v(" "),n("ul",[n("li",[t._v("原因一：防止阻塞构建 DOM 树")]),t._v(" "),n("li",[t._v("原因二："),n("a",{attrs:{href:"https://codepen.io/huangzonggui/pen/WNXMPOe",target:"_blank",rel:"noopener noreferrer"}},[t._v("可能会操作 DOM，如果操作了 DOM 还没渲染出来的部分，会出错"),n("OutboundLink")],1)])])]),t._v(" "),n("li",[n("p",[t._v("大的 CSS 文件，通过媒体查询，将其拆分为多个不同用途的 CSS 文件，这样只有在特定的场景下才会加载特定的 CSS 文件。")])])]),t._v(" "),n("h3",{attrs:{id:"交互阶段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#交互阶段"}},[t._v("#")]),t._v(" 交互阶段")]),t._v(" "),n("p",[t._v("修改了颜色、字体，不会涉及到布局调整，可以跳过布局阶段，直接进入绘制阶段，这个过程叫"),n("code",[t._v("重绘")]),t._v("。")]),t._v(" "),n("p",[t._v("通过 CSS 实现的渐变、动画、变形等特效，是在"),n("code",[t._v("合成线程")]),t._v("中执行的，这个过程称为"),n("code",[t._v("合成")]),t._v("。\n合成不会触发重排和重绘，合成操作速度本身是很快的，所以执行合成效率是最高的。所以一般能\n用 CSS 来实现的尽量使用 CSS 来代替 JavaScript。")]),t._v(" "),n("p",[t._v("优化原则："),n("strong",[t._v("让单个帧生成速度标快")])]),t._v(" "),n("ol",[n("li",[n("p",[t._v("减少 JavaScript 脚本执行时间")]),t._v(" "),n("ul",[n("li",[t._v("将一次执行的函数分解为多个任务，使得每次的执行时间不要过久\n"),n("ul",[n("li",[t._v("react fiber 任务分片思想算不算？")])])]),t._v(" "),n("li",[t._v("采用 "),n("code",[t._v("Web Workers")]),t._v("，独立于主线程外的线程。不过 Web Workers 中没有 DOM、CSSOM 环境，\n可以把一些和 DOM 操作无关且耗时的任务放到 Web Workers 中去执行。")])]),t._v(" "),n("blockquote",[n("p",[t._v("总之，在交互阶段，对 JavaScript 脚本总的原则就是"),n("code",[t._v("不要一次霸占太久主线程。")])])])]),t._v(" "),n("li",[n("p",[t._v("避免强制同步布局")]),t._v(" "),n("blockquote",[n("p",[t._v("执行 "),n("code",[t._v("JavaScript 添加元素")]),t._v("是在一个任务中执行的，"),n("code",[t._v("重新计算样式布局")]),t._v("是在"),n("code",[t._v("另外一个任务")]),t._v("中执行，这就是正常情况下的布局操作。")])]),t._v(" "),n("p",[n("strong",[t._v("强制同步布局，就是强制将计算样式和布局操作提前到当前任务中执行")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" main_div "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mian_div"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" new_node "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" textnode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTextNode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time.geekbang"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tnew_node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("textnode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tdocument"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mian_div"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("new_node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//由于要获取到offsetHeight，")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//但是此时的offsetHeight还是老的数据，")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//所以需要立即执行布局操作(强制同步布局)")]),t._v("\n\tconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main_div"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])])]),t._v(" "),n("li",[n("p",[t._v("避免布局抖动\n"),n("strong",[t._v("在一段 JavaScript 代码中，反复执行布局操作，就是布局抖动")]),t._v(" "),n("img",{attrs:{src:a(568),alt:""}})])])]),t._v(" "),n("blockquote",[n("p",[t._v("尽量不要在修改 DOM 结构时再去查询一些相关值")])]),t._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[t._v("合理利用 CSS 动画")])]),t._v(" "),n("ul",[n("li",[t._v("能让 CSS 处理动画，就尽量交给 CSS 来操作。")]),t._v(" "),n("li",[t._v("如果能提前知道对某个元素执行动画操作，将其标记为 "),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/will-change",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("will-change")]),n("OutboundLink")],1),t._v("，这是告诉渲染引擎需要将该元素"),n("code",[t._v("单独生成一个图层")]),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("will"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("change"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" auto\nwill"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("change"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" scroll"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("position\nwill"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("change"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" contents\nwill"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("change"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" transform        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example of <custom-ident>")]),t._v("\nwill"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("change"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" opacity          "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example of <custom-ident>")]),t._v("\nwill"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("change"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" left"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" top        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Example of two <animateable-feature>")]),t._v("\n\nwill"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("change"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" unset\nwill"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("change"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" initial\nwill"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("change"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" inherit\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])])])]),t._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[t._v("使用 HTTP 2.0，提升网络速度")])]),t._v(" "),n("ul",[n("li",[t._v("HTTP/2 多路复用\n"),n("ul",[n("li",[t._v("使用"),n("code",[t._v("二进制分帧")])]),t._v(" "),n("li",[t._v("HTTP/1.1 之所以无法多路复用，是因为 HTTP/1.1是基于“文本分割”解析的协议\n"),n("img",{attrs:{src:a(569),alt:""}})])])]),t._v(" "),n("li",[t._v("一个域名只使用"),n("code",[t._v("一个 TCP 长连接")]),t._v("和"),n("code",[t._v("消除队头阻塞")]),t._v("问题")]),t._v(" "),n("li",[t._v("头部压缩")])]),t._v(" "),n("h2",{attrs:{id:"实践"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实践"}},[t._v("#")]),t._v(" 实践")]),t._v(" "),n("ul",[n("li",[t._v("多语言文件")]),t._v(" "),n("li",[t._v("多语言样式\n"),n("ul",[n("li",[t._v("媒体查")]),t._v(" "),n("li",[t._v("样式公共抽离")]),t._v(" "),n("li",[t._v("样式变量")])])]),t._v(" "),n("li",[t._v("js css 在首次渲染的时候不必要的文件，将其设置为 defer async\n"),n("ul",[n("li",[t._v("async 标志的脚本文件一旦加载完成，会立即执行；")]),t._v(" "),n("li",[t._v("defer 标记的脚本文件，需要在 "),n("code",[t._v("DOMContentLoaded")]),t._v(" 事件之前执行。")])])])]),t._v(" "),n("p",[t._v("参考")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://time.geekbang.org/column/article/118826",target:"_blank",rel:"noopener noreferrer"}},[t._v("06 | 渲染流程（下）：HTML、CSS和JavaScript，是如何变成页面的？"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://time.geekbang.org/column/article/140703",target:"_blank",rel:"noopener noreferrer"}},[t._v("23 | 渲染流水线：CSS如何影响首次加载时的白屏时间？"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://time.geekbang.org/column/article/143889",target:"_blank",rel:"noopener noreferrer"}},[t._v("25 | 页面性能：如何系统地优化页面"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://time.geekbang.org/column/article/174254",target:"_blank",rel:"noopener noreferrer"}},[t._v("加餐三｜加载阶段性能：使用Audits来优化Web性能"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://time.geekbang.org/column/article/148546",target:"_blank",rel:"noopener noreferrer"}},[t._v("30｜HTTP/2：如何提升网络速度？"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://segmentfault.com/a/1190000016975064",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP/2协议“多路复用”实现原理"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6844904083212468238#heading-2",target:"_blank",rel:"noopener noreferrer"}},[t._v("重排(reflow)和重绘(repaint)"),n("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);