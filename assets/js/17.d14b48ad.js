(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{557:function(s,a,t){"use strict";t.r(a);var e=t(12),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[s._v("#")]),s._v(" webpack")]),s._v(" "),t("p",[s._v("成熟的工具，重点在于配置、使用、性能优化，原理不是高优")]),s._v(" "),t("h2",{attrs:{id:"为什么需要webpack-webpack作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要webpack-webpack作用"}},[s._v("#")]),s._v(" 为什么需要webpack? webpack作用")]),s._v(" "),t("ul",[t("li",[s._v("优化打包效率")]),s._v(" "),t("li",[s._v("优化打包后代码： 压缩代码，整合代码，以网页加载更快")]),s._v(" "),t("li",[s._v("工程化，构建流程")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e9cfe2ef31b4646b06c57e650b40b06~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h2",{attrs:{id:"🤔思考问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🤔思考问题"}},[s._v("#")]),s._v(" 🤔思考问题")]),s._v(" "),t("ul",[t("li",[s._v("module chunk bundle 分别是什么意思？有何区别？")]),s._v(" "),t("li",[s._v("loader和plugin的区别？")]),s._v(" "),t("li",[s._v("webpack如何实现懒加载")]),s._v(" "),t("li",[s._v("babel-runtime 和 babel-polyfill的区别")])]),s._v(" "),t("h2",{attrs:{id:"关于webpack5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关于webpack5"}},[s._v("#")]),s._v(" 关于webpack5")]),s._v(" "),t("ul",[t("li",[s._v("webpack5主要是内部效率的优化")]),s._v(" "),t("li",[s._v("对比webpack4没有太多的使用上的改动\n"),t("ul",[t("li",[s._v("https://webpack.docschina.org/blog/2020-10-10-webpack-5-release/")])])]),s._v(" "),t("li",[s._v("升级webpack5的同时注意升级周边插件")])]),s._v(" "),t("h2",{attrs:{id:"基本配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本配置"}},[s._v("#")]),s._v(" 基本配置")]),s._v(" "),t("h3",{attrs:{id:"安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装配置"}},[s._v("#")]),s._v(" 安装配置")]),s._v(" "),t("p",[s._v("初始化安装")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("npm install webpack webpack-cli html-webpack-plugin webpack-dev-server -D\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("打包命令")]),s._v(" "),t("ul",[t("li",[s._v("webpack")])]),s._v(" "),t("h3",{attrs:{id:"拆分配置和merge"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拆分配置和merge"}},[s._v("#")]),s._v(" 拆分配置和merge")]),s._v(" "),t("ul",[t("li",[s._v("webpack.common.js 公共配置")]),s._v(" "),t("li",[s._v("webpack.dev.js 开发环境")]),s._v(" "),t("li",[s._v("webpack.prod.js 生产环境")])]),s._v(" "),t("h3",{attrs:{id:"启动本地服务-dev-server-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动本地服务-dev-server-命令"}},[s._v("#")]),s._v(" 启动本地服务 dev-server 命令")]),s._v(" "),t("ul",[t("li",[s._v("webpack-dev-server(webpack4)")]),s._v(" "),t("li",[s._v("webpack serve(webpack5)")])]),s._v(" "),t("h3",{attrs:{id:"module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[s._v("#")]),s._v(" Module")]),s._v(" "),t("h4",{attrs:{id:"rule"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rule"}},[s._v("#")]),s._v(" rule")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\trules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\ttest"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Include all modules that pass test assertion.")]),s._v("\n\t\t\tuse"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'babel-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                        include"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" srcPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\texclude"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("node_modules")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"解析es6-编译为es5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解析es6-编译为es5"}},[s._v("#")]),s._v(" 解析ES6 -> 编译为ES5")]),s._v(" "),t("p",[s._v("修改配置文件"),t("code",[s._v(".babelrc")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('{\n    "presets": ["@babel/preset-env"]\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("code",[s._v("@babel/preset-env")]),s._v(" 是 babel 7 架構下的一組 preset，"),t("strong",[s._v("能讓你用最新的 JavaScript 語法寫程式，並且智慧地根據瀏覽器的環境引入需要的 polyfill")]),s._v("，節省手動管理 syntax transform 的時間，還能夠減少 bundle 檔案大小")]),s._v(" "),t("h3",{attrs:{id:"devserver"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#devserver"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://webpack.docschina.org/configuration/dev-server/",target:"_blank",rel:"noopener noreferrer"}},[s._v("devServer"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("compress\n"),t("ul",[t("li",[s._v("启动gzip compressinon")])])]),s._v(" "),t("li",[s._v("hot\n"),t("ul",[t("li",[s._v("启用 webpack 的 热模块替换 特性")])])]),s._v(" "),t("li",[s._v("open\n"),t("ul",[t("li",[s._v("告诉 dev-server 在服务器已经启动后打开浏览器。")])])]),s._v(" "),t("li",[s._v("port\n"),t("ul",[t("li",[s._v("指定监听请求的端口号")])])]),s._v(" "),t("li",[s._v("proxy\n"),t("ul",[t("li",[s._v("代理 解决开发时的跨域问题\n"),t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05757715efd149a1b265de1e2cfae44a~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})])])])]),s._v(" "),t("h3",{attrs:{id:"解析图片文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解析图片文件"}},[s._v("#")]),s._v(" 解析图片文件")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// import img")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("insertImgElem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("imgFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" img "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Image")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\timg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" imgFile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\tdocument"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("appendChild")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("img"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" imgFile1 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./img/1.png'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("insertImgElem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("imgFile1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" imgFile2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./img/2.jpeg'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("insertImgElem")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("imgFile2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("strong",[t("code",[s._v("Image()")])]),s._v(" 函数将会创建一个新的"),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLImageElement",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("HTMLImageElement")]),t("OutboundLink")],1),s._v("实例。")]),s._v(" "),t("p",[s._v("它的功能等价于 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createElement",title:"document.createElement('img')",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("document.createElement('img')")]),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("webpack配置")]),s._v(" "),t("ol",[t("li")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D file-loader \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D url-loader \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("webpack.dev.js")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(png|jpeg|jpg|git)$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file-loader'")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("webpack.prod.js")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(png|jpeg|jpg|git)$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'url-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 小于 5kb 的图片 base64 格式产出")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 否侧 依然用 file-loader 的形式，产出 url 格式")]),s._v("\n                    limit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打包到 img 目錄下")]),s._v("\n                    outputPath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/img1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 設置圖片的cdn地址")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// publicPath: 'https://cdn.abc.com'")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[s._v("效果")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d5058eea62e4075ac9dc0e868266855~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("p",[s._v("好处：图片小 用base64 减少一次http请求 减少耗时")]),s._v(" "),t("h3",{attrs:{id:"常见loader和plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见loader和plugin"}},[s._v("#")]),s._v(" 常见loader和plugin")]),s._v(" "),t("h3",{attrs:{id:"处理样式文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#处理样式文件"}},[s._v("#")]),s._v(" 处理样式文件")]),s._v(" "),t("ul",[t("li",[s._v("postcss-loader")]),s._v(" "),t("li",[s._v("less-loader")]),s._v(" "),t("li",[s._v("css-loader")]),s._v(" "),t("li",[s._v("style-loader")])]),s._v(" "),t("blockquote",[t("p",[s._v("npm i -D postcss-loader less-loader css-loader style-loader")])]),s._v(" "),t("p",[s._v("配置 webpack.common.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// loader 的执行顺序是： 从后往前")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postcss-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 加了postcss")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" \n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.less$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 增加 ‘less-loader',注意顺序")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'less-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("postcss-loader中配置自动生成前缀postcss.config.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'autoprefixer'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("code",[s._v("transform: rotate(-45deg)")]),s._v(" 自动添加前缀的效果\n"),t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fbde75249d944eecb0226652521740e7~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h2",{attrs:{id:"高级配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#高级配置"}},[s._v("#")]),s._v(" 高级配置")]),s._v(" "),t("h3",{attrs:{id:"配置多入口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置多入口"}},[s._v("#")]),s._v(" 配置多入口")]),s._v(" "),t("p",[s._v("虽然说现在的项目都是SPA(单页面应用)，但项目有时候需要产出多个页面")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 多入口 - 生成 index.html")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\ttemplate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("srcPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.html'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\tfilename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index.html'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// chunks 表示该页面要引用哪些 chunk （即上面的 index 和 other），默认全部引用")]),s._v("\n\t\t\tchunks"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'index'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只引用 index.js")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 多入口 - 生成 other.html")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HtmlWebpackPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\ttemplate"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("srcPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'other.html'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\tfilename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'other.html'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\tchunks"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'other'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只引用 other.js")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/882f23e1431b4156a7b349cba008e709~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1da18398d4fc459993565d5953a69b0b~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}}),s._v("\n打包输出")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d3b7065c5b594080bfa53003c87b18ac~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h3",{attrs:{id:"抽离和压缩css-重要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#抽离和压缩css-重要"}},[s._v("#")]),s._v(" 抽离和压缩CSS(重要)")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/090d5afa47224a0b9986cedb0b84bf9b~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h3",{attrs:{id:"抽离公共代码-重要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#抽离公共代码-重要"}},[s._v("#")]),s._v(" 抽离公共代码(重要)")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("为什么需要抽离公共代码和第三方代码？")]),s._v(" "),t("ul",[t("li",[s._v("当引入第三方库时，如果不独立打包，每次修改业务逻辑代码，都会重新打包第三方库，导致加载慢。")]),s._v(" "),t("li",[s._v("两个文件引入了同一个模块，会打包两次")])])]),s._v(" "),t("li",[t("p",[s._v("配置为独立的chunks")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f93a2c82696341d5a0daeafc957f2ad4~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h3",{attrs:{id:"webpack如何实现异步加载js-懒加载-重要"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack如何实现异步加载js-懒加载-重要"}},[s._v("#")]),s._v(" webpack如何实现异步加载JS(懒加载)(重要)")]),s._v(" "),t("p",[s._v("默认支持的语法，不用配置")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./danymic.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("res")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打包时会独立成一个chunk")]),s._v("\n\t\tconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'res :>> '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"处理react和vue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#处理react和vue"}},[s._v("#")]),s._v(" 处理React和Vue")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("处理React(解析JSX语法)")]),s._v(" "),t("p",[s._v("安装")]),s._v(" "),t("div",{staticClass:"language-Shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" --save-dev @babel/preset-react\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v(".babelrc")]),s._v(" "),t("blockquote",[t("p",[s._v("注意： "),t("code",[s._v("env")]),s._v(" 参数可能很快将被废弃")])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"presets"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"@babel/preset-react"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("配置完webpack中配置了'babel-loader'，babel-loader会使用@babel/preset-react 去解析JSX语法")])]),s._v(" "),t("li",[t("p",[s._v("处理vue(vue-loader)")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/06152993283e4da78e73ba97916e4a2f~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})])])]),s._v(" "),t("p",[s._v("参考：https://www.babeljs.cn/docs/babel-preset-react")]),s._v(" "),t("ul",[t("li",[s._v("处理Vue")])]),s._v(" "),t("h3",{attrs:{id:"module-chunk-bundle的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#module-chunk-bundle的区别"}},[s._v("#")]),s._v(" module chunk bundle的区别")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("module-各个源码文件，webpack中一切皆模块\n（能被引入的文件都是模块，不管是什么类型，比如css  js 图片）")])]),s._v(" "),t("li",[t("p",[s._v("chunk-多模块合并成的，如entry、import() 、splitChunk都可以生成chunk")])]),s._v(" "),t("li",[t("p",[s._v("bundle-最终的输出文件")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/203f59619ab143769f3d87cf73fe2e7c~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h2",{attrs:{id:"优化构建速度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化构建速度"}},[s._v("#")]),s._v(" 优化构建速度")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d54e180797ab4bb5abe3d55ad1e6bc21~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("p",[s._v("让你聊聊webpack的时候，不要跟背书式回答问题，要通过分析问题的思路来回答问题")]),s._v(" "),t("h3",{attrs:{id:"优化babel-loader-一般用于开发环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化babel-loader-一般用于开发环境"}},[s._v("#")]),s._v(" 优化babel-loader（一般用于开发环境）")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 优化： 1. 开启缓存 2. include exclude明确范围，写其中一个即可以")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'babel-loader?cacheDirectory'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开启缓存")]),s._v("\n                include"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" srcPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// exclude: /node_modules/")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("开启缓存: 用cacheDirectory，只要ES6代码没变，就不会重新编译，会缓存下来\n第二次编译时，没改的部分使用缓存")]),s._v(" "),t("h3",{attrs:{id:"ignoreplugin-可用于生产环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ignoreplugin-可用于生产环境"}},[s._v("#")]),s._v(" IgnorePlugin（可用于生产环境）")]),s._v(" "),t("p",[s._v("避免一些模块引入。如果不用IgnorePlugin，可能会出现一些问题，比如打包的体积太大，打包慢")]),s._v(" "),t("p",[s._v("例如：moment会支持多语言，如何只引入中文模块？")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 忽略 moment 下的全部 /locale目录 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("webpack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("IgnorePlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.\\/locale")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("moment")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("按需引入")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 业务代码中动态引入语言包 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'moment/locale/zh-cn'")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"noparse-忽略大型的-library-可以提高构建性能-可用于生产环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#noparse-忽略大型的-library-可以提高构建性能-可用于生产环境"}},[s._v("#")]),s._v(" noParse(忽略大型的 library 可以提高构建性能)（可用于生产环境）")]),s._v(" "),t("p",[s._v("noParse避免重复打包 module: { noParse: [/react.min.js$/] }")]),s._v(" "),t("p",[s._v("IgnorePlugin和noParse区别：")]),s._v(" "),t("ul",[t("li",[s._v("IgnorePlugin直接不引入，代码中没有")]),s._v(" "),t("li",[s._v("noParse(类似vue.min.js已经模块化处理过)引入，但不打包")])]),s._v(" "),t("h3",{attrs:{id:"happypack-多进程打包-可用于生产环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#happypack-多进程打包-可用于生产环境"}},[s._v("#")]),s._v(" happyPack 多进程打包（可用于生产环境）")]),s._v(" "),t("p",[s._v("JS单线程，开启多进程打包\n提高构建速度（特别是多核CPU）")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a95a298befb1412fa33a115b874a1eda~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f936666cfddb4a87b7c5d24594cb5c47~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h3",{attrs:{id:"paralleluglifyplugin优化压缩-可用于生产环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#paralleluglifyplugin优化压缩-可用于生产环境"}},[s._v("#")]),s._v(" ParallelUglifyPlugin优化压缩（可用于生产环境）")]),s._v(" "),t("p",[s._v("必须用于生产环境，压缩代码")]),s._v(" "),t("ul",[t("li",[s._v("webpack内置Uglify工具压缩JS")]),s._v(" "),t("li",[s._v("JS单线程，开启多线程压缩更快")]),s._v(" "),t("li",[s._v("和happypack同理")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用 ParallelUglifyPlugin 并行压缩输出的 JS 代码")]),s._v("\nplugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ParallelUglifyPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 传递给 UglifyJS 的参数")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// （还是使用 UglifyJS 压缩，只不过帮助开启了多进程）")]),s._v("\n        uglifyJS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            output"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                beautify"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 最紧凑的输出")]),s._v("\n                comments"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除所有的注释")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            compress"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除所有的 `console` 语句，可以兼容ie浏览器")]),s._v("\n                drop_console"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 内嵌定义了但是只用到一次的变量")]),s._v("\n                collapse_vars"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 提取出出现多次但是没有定义成变量去引用的静态值")]),s._v("\n                reduce_vars"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("ul",[t("li",[s._v("关于是否需要开启多进程\n"),t("ul",[t("li",[s._v("项目较大的时候，开启会加快打包")]),s._v(" "),t("li",[s._v("项目较小的时候，开启会变慢，因为多进程开销")])])])]),s._v(" "),t("h3",{attrs:{id:"自动刷新-不可用于生产环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自动刷新-不可用于生产环境"}},[s._v("#")]),s._v(" 自动刷新（不可用于生产环境）")]),s._v(" "),t("p",[s._v("一般不用自我配置，因为开发的时候一般会用devServer，会自动开启自动刷新")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 一般不用自我配置，因为开发的时候一般会用devServer，会自动开启自动刷新")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// watch: true, // 开启监听，默认为 false")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// // 开启监听后，webpack-dev-server 会自动开启刷新浏览器")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// // 监听配置")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// watchOptions: {")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     ignored: /node_modules/, // 忽略哪些")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     // 监听到变化发生后会等300ms再去执行动作，防止文件更新太快导致重新编译频率太高")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     // 默认为 300ms")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     aggregateTimeout: 300,")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     // 判断文件是否发生变化是通过不停的去询问系统指定文件有没有变化实现的")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     // 默认每隔1000毫秒询问一次")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     poll: 1000")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// }")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h3",{attrs:{id:"热更新-不可用于生产环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#热更新-不可用于生产环境"}},[s._v("#")]),s._v(" 热更新（不可用于生产环境）")]),s._v(" "),t("p",[s._v("区别")]),s._v(" "),t("ul",[t("li",[s._v("自动刷新：整个网页全部刷新，速度慢，状态会丢失（比如填写表单时，表单内容会丢失，或者路由跳转了很多层，网页刷新后会跳到首页）")]),s._v(" "),t("li",[s._v("热更新：新代码生效，网页不刷新，状态不丢失")])]),s._v(" "),t("p",[s._v("开启热更新配置")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c6d7212a6bd47309d6590e475909c02~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("p",[s._v("配置哪些模块需要热更新")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/53af7ab2bb774bcdbf28d4c9485fa2c8~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h3",{attrs:{id:"dllplugin拆分-bundles-不可用于生产环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dllplugin拆分-bundles-不可用于生产环境"}},[s._v("#")]),s._v(" DllPlugin拆分 bundles（不可用于生产环境）")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("前端框架如vue React 体积大，构建慢")])]),s._v(" "),t("li",[t("p",[s._v("较稳定，不常升级")])]),s._v(" "),t("li",[t("p",[s._v("同一个版本只需要构建一次，不用每次都重新构建")])]),s._v(" "),t("li",[t("p",[s._v("webpack已内置DllPlugin支持")])]),s._v(" "),t("li",[t("p",[s._v("DllPlugin 打包出dll文件")]),s._v(" "),t("ul",[t("li",[s._v("打包后产出文件\n"),t("ul",[t("li",[s._v("react.dll.js 打包后的内容")]),s._v(" "),t("li",[s._v("react.manifest.json 索引\n配置参考")])])])])])]),s._v(" "),t("p",[s._v("webpack.dll.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" DllPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack/lib/DllPlugin'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" srcPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" distPath "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./paths'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'development'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// JS 执行入口文件")]),s._v("\n  entry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把 React 相关模块的放到一个单独的动态链接库")]),s._v("\n    react"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'react-dom'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  output"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 输出的动态链接库的文件名称，[name] 代表当前动态链接库的名称，")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 也就是 entry 中配置的 react 和 polyfill")]),s._v("\n    filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name].dll.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 输出的文件都放到 dist 目录下")]),s._v("\n    path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" distPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 存放动态链接库的全局变量名称，例如对应 react 来说就是 _dll_react")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 之所以在前面加上 _dll_ 是为了防止全局变量冲突")]),s._v("\n    library"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'_dll_[name]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 接入 DllPlugin")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DllPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 动态链接库的全局变量名称，需要和 output.library 中保持一致")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 该字段的值也就是输出的 manifest.json 文件 中 name 字段的值")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// 例如 react.manifest.json 中就有 "name": "_dll_react"')]),s._v("\n      name"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'_dll_[name]'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 描述动态链接库的 manifest.json 文件输出时的文件名称")]),s._v("\n      path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("distPath"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'[name].manifest.json'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br")])]),t("ul",[t("li",[s._v("DllReferencePlugin 使用dll文件\n配置")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0bcaaf01df1a4a5983a782693a6b4050~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h2",{attrs:{id:"优化产出代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化产出代码"}},[s._v("#")]),s._v(" 优化产出代码")]),s._v(" "),t("ul",[t("li",[s._v("体积更小")]),s._v(" "),t("li",[s._v("合理分包，不重复加载")]),s._v(" "),t("li",[s._v("速度更快，内存使用更少")])]),s._v(" "),t("h3",{attrs:{id:"使用生产环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用生产环境"}},[s._v("#")]),s._v(" 使用生产环境")]),s._v(" "),t("p",[s._v("mode: 'production',打包生产环境代码")]),s._v(" "),t("ul",[t("li",[s._v("自动开启代码压缩")]),s._v(" "),t("li",[s._v("Vue React等框架会自动删掉调试代码(如开发环境的warning)")]),s._v(" "),t("li",[s._v("自动开启Tree-Shaking(摇晃树，把没有用的东西摇掉)")])]),s._v(" "),t("p",[s._v("什么是Tree-Shaking")]),s._v(" "),t("ul",[t("li",[s._v("js和css都可以treeShaking")]),s._v(" "),t("li",[s._v("ES6 Module才能让tree-shaking生效，commonjs不可以。因为ES6 Module是静态引入，Commonjs是动态引入")])]),s._v(" "),t("p",[s._v("tree-shaking会把一些没有用到的函数删除")]),s._v(" "),t("h3",{attrs:{id:"小图片使用base64编码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小图片使用base64编码"}},[s._v("#")]),s._v(" 小图片使用base64编码")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v(" module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 图片 - 考虑 base64 编码的情况")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.(png|jpg|jpeg|gif)$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'url-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                options"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 小于 5kb 的图片用 base64 格式产出")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 否则，依然延用 file-loader 的形式，产出 url 格式")]),s._v("\n                    limit"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打包到 img 目录下")]),s._v("\n                    outputPath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/img1/'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置图片的 cdn 地址（也可以统一在外面的 output 中设置，那将作用于所有静态资源）")]),s._v("\n                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// publicPath: 'http://cdn.abc.com'")]),s._v("\n                "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h3",{attrs:{id:"bundle加hash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bundle加hash"}},[s._v("#")]),s._v(" bundle加hash")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/786d91edc1e24f08b472c1d9a440743b~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h3",{attrs:{id:"提取公共代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提取公共代码"}},[s._v("#")]),s._v(" 提取公共代码")]),s._v(" "),t("p",[s._v("splitChunks")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a5d2172b1f6c44bc9a01fd5a9fd682d1~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h3",{attrs:{id:"懒加载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#懒加载"}},[s._v("#")]),s._v(" 懒加载")]),s._v(" "),t("h3",{attrs:{id:"使用cdn加速"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用cdn加速"}},[s._v("#")]),s._v(" 使用CDN加速")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/caadc5cdd1c04a1d9e0dc064e74c489a~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h3",{attrs:{id:"webpack的scope-hosting-作用域提升"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack的scope-hosting-作用域提升"}},[s._v("#")]),s._v(" webpack的scope hosting(作用域提升)")]),s._v(" "),t("p",[s._v("默认情况不开启scope hosting")]),s._v(" "),t("ul",[t("li",[s._v("产生多个函数，每个函数都有一个作用域，对js代码执行和内存消耗非常不友好")])]),s._v(" "),t("p",[s._v("开启后")]),s._v(" "),t("ul",[t("li",[s._v("多个函数合并为一个函数，作用域减少")]),s._v(" "),t("li",[s._v("代码体积更小")]),s._v(" "),t("li",[s._v("创建函数作用域更少")]),s._v(" "),t("li",[s._v("代码可读性更好")])]),s._v(" "),t("p",[s._v("来自："),t("a",{attrs:{href:"https://webpack.wuhaolin.cn/4%E4%BC%98%E5%8C%96/4-14%E5%BC%80%E5%90%AFScopeHoisting.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("深入浅出webpack"),t("OutboundLink")],1)]),s._v(" "),t("blockquote",[t("p",[s._v("同时，考虑到 Scope Hoisting 依赖源码需采用 ES6 模块化语法，还需要配置 "),t("code",[s._v("mainFields")]),s._v("。 原因在 "),t("a",{attrs:{href:"https://webpack.wuhaolin.cn/4%E4%BC%98%E5%8C%96/4-10%E4%BD%BF%E7%94%A8TreeShaking.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("4-10 使用 TreeShaking"),t("OutboundLink")],1),s._v(" 中提到过：因为大部分 Npm 中的第三方库采用了 CommonJS 语法，但部分库会同时提供 ES6 模块化的代码，为了充分发挥 Scope Hoisting 的作用，需要增加以下配置：")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("module.exports = {\n  resolve: {\n    // 针对 Npm 中的第三方模块优先采用 jsnext:main 中指向的 ES6 模块化语法的文件\n    mainFields: ['jsnext:main', 'browser', 'main']\n  },\n};\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1d35f8d0f0de4466b299fd8649e779d4~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),s._v(" "),t("h2",{attrs:{id:"webpack4升级-webpack5-以及周边插件后"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack4升级-webpack5-以及周边插件后"}},[s._v("#")]),s._v(" webpack4升级 webpack5 以及周边插件后")]),s._v(" "),t("h1",{attrs:{id:"babel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel"}},[s._v("#")]),s._v(" Babel")]),s._v(" "),t("h2",{attrs:{id:"babel作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel作用"}},[s._v("#")]),s._v(" Babel作用")]),s._v(" "),t("p",[s._v("ES6模块化，浏览器并不完全支持，需要通过Babel来编译成ES5")]),s._v(" "),t("p",[s._v("例如：将"),t("code",[s._v("let")]),s._v(" "),t("code",[s._v("const")]),s._v(" 编译为"),t("code",[s._v("var")]),s._v("；将"),t("code",[s._v("class")]),s._v("编译为"),t("code",[s._v("function")])]),s._v(" "),t("h2",{attrs:{id:"环境搭建和基本配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境搭建和基本配置"}},[s._v("#")]),s._v(" 环境搭建和基本配置")]),s._v(" "),t("p",[s._v("package.json")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/cli"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.5"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/core"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.5"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/plugin-transform-runtime"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.5"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/preset-env"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.5"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dependencies"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/polyfill"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/runtime"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.5"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v(".babelrc 基本配置")]),s._v(" "),t("div",{staticClass:"language-babelrc line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('{\n    "presets": [\n        [\n            "@babel/preset-env"\n        ]\n    ],\n    "plugins": [\n    ]\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"presets"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#presets"}},[s._v("#")]),s._v(" presets")]),s._v(" "),t("ul",[t("li",[s._v("@babel/preset-env是很多plugin的一个集合，可以转换ES6 7 8语法\n"),t("ul",[t("li",[s._v("是一个babel插件的集合，预设置，代替我们写很多的plugins")])])]),s._v(" "),t("li",[s._v("@babel/preset-flow")]),s._v(" "),t("li",[s._v("@babel/preset-react(转换jsx语法)")]),s._v(" "),t("li",[s._v("@babel/preset-typescript(转换ts语法)")])]),s._v(" "),t("h2",{attrs:{id:"babel和babel-loader的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel和babel-loader的区别"}},[s._v("#")]),s._v(" babel和babel-loader的区别")]),s._v(" "),t("ul",[t("li",[s._v("babel是编译ES6的核心工具")]),s._v(" "),t("li",[s._v("babel-loader是用babel封装后，将babel用于webpack打包流程。类似less和less-loader")])]),s._v(" "),t("h2",{attrs:{id:"babel-polyfill"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-polyfill"}},[s._v("#")]),s._v(" babel-polyfill")]),s._v(" "),t("h3",{attrs:{id:"什么是babel-polyfill"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是babel-polyfill"}},[s._v("#")]),s._v(" 什么是babel-polyfill？")]),s._v(" "),t("p",[s._v("对一些浏览器不支持的函数做补丁或者兼容")]),s._v(" "),t("ul",[t("li",[s._v("babel只负责解析语法，不处理API,也不管模块化（webpack处理模块化）")]),s._v(" "),t("li",[s._v("webpack把babel-polyfill引入进来，babel处理完交给webpack。polyfill解析Promise和includes语法，API就可以在浏览器正常运行")])]),s._v(" "),t("h3",{attrs:{id:"babel-polyfill与core-js关系"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-polyfill与core-js关系"}},[s._v("#")]),s._v(" @babel/polyfill与core-js关系")]),s._v(" "),t("p",[t("code",[s._v("@babel/polyfill")]),s._v("可以看作是："),t("code",[s._v("core-js")]),s._v("加"),t("code",[s._v("regenerator-runtime")]),s._v("。")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("regenerator-runtime")]),s._v("是"),t("code",[s._v("generator")]),s._v("以及"),t("code",[s._v("async/await")]),s._v("的运行时依赖")])]),s._v(" "),t("p",[s._v("单独使用"),t("code",[s._v("@babel/polyfill")]),s._v("会将"),t("code",[s._v("core-js")]),s._v("全量导入，造成项目打包体积过大。")]),s._v(" "),t("blockquote",[t("p",[s._v("从Babel v7.4.0[5]开始，"),t("code",[s._v("@babel/polyfill")]),s._v("被废弃了，可以直接引用"),t("code",[s._v("core-js")]),s._v("与"),t("code",[s._v("regenerator-runtime")]),s._v("替代")])]),s._v(" "),t("p",[s._v("为了解决全量引入"),t("code",[s._v("core-js")]),s._v("造成打包体积过大的问题，我们需要配合使用"),t("code",[s._v("@babel/preset-env")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"babel-polyfill如何按需引入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-polyfill如何按需引入"}},[s._v("#")]),s._v(" babel-polyfill如何按需引入")]),s._v(" "),t("h4",{attrs:{id:"为什么要按需引入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么要按需引入"}},[s._v("#")]),s._v(" 为什么要按需引入")]),s._v(" "),t("p",[s._v("babel-polyfill文件较大，如果只使用一部分功能，无需全部引入。（已废弃原因）")]),s._v(" "),t("h2",{attrs:{id:"babel-runtime"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-runtime"}},[s._v("#")]),s._v(" babel-runtime")]),s._v(" "),t("h4",{attrs:{id:"babel-polyfill的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-polyfill的问题"}},[s._v("#")]),s._v(" babel-polyfill的问题")]),s._v(" "),t("ul",[t("li",[s._v("会污染全局环境。如果做一个独立的系统，则没问题，如果做一个第三方库，就会可能产生与使用方命名冲突问题。")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("babel-runtime： 避免自行引入polyfill时导致的污染全局命名空间的问题\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("blockquote",[t("p",[s._v("@babel/plugin-transform-runtime 的作用是将 helper 和 polyfill 都改为从一个统一的地方引入，并且引入的对象和全局变量是完全隔离的，这样解决了上面的两个问题。")])]),s._v(" "),t("p",[s._v("参考")]),s._v(" "),t("ul",[t("li",[s._v("https://zhuanlan.zhihu.com/p/147083132")])]),s._v(" "),t("h1",{attrs:{id:"思考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#思考"}},[s._v("#")]),s._v(" 思考")]),s._v(" "),t("h2",{attrs:{id:"前端为什么需要打包构建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前端为什么需要打包构建"}},[s._v("#")]),s._v(" 前端为什么需要打包构建")]),s._v(" "),t("h3",{attrs:{id:"代码层面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码层面"}},[s._v("#")]),s._v(" 代码层面")]),s._v(" "),t("ul",[t("li",[s._v("打包体积会更小（tree-shaking，代码压缩，合并），加载速度更快")]),s._v(" "),t("li",[s._v("编译高级语言语法（TS，ES6，less，scss，模块化）")]),s._v(" "),t("li",[s._v("兼容性和错误提示（babel-polyfill、postcss、eslint）")])]),s._v(" "),t("h3",{attrs:{id:"打包流程、前端工程化方面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包流程、前端工程化方面"}},[s._v("#")]),s._v(" 打包流程、前端工程化方面")]),s._v(" "),t("ul",[t("li",[s._v("統一、高效的开发环境")]),s._v(" "),t("li",[s._v("统一的构建流程和产出标准")]),s._v(" "),t("li",[s._v("集成公司的构建规范（提测、上线等）")])]),s._v(" "),t("h2",{attrs:{id:"module-chunk-bundle的区别-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#module-chunk-bundle的区别-2"}},[s._v("#")]),s._v(" module chunk bundle的区别")]),s._v(" "),t("h2",{attrs:{id:"loader和plugin的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#loader和plugin的区别"}},[s._v("#")]),s._v(" loader和plugin的区别")]),s._v(" "),t("ul",[t("li",[s._v("loader模块转换器 如less -> css")]),s._v(" "),t("li",[s._v("plugin扩展插件 如HtmlWebpackPlugin")])]),s._v(" "),t("h2",{attrs:{id:"常见的loader和plugin有哪些"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见的loader和plugin有哪些"}},[s._v("#")]),s._v(" 常见的loader和plugin有哪些")]),s._v(" "),t("h2",{attrs:{id:"babel和webpack的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel和webpack的区别"}},[s._v("#")]),s._v(" babel和webpack的区别")]),s._v(" "),t("ul",[t("li",[s._v("babel-js新语法编译工具，不关心模块化")]),s._v(" "),t("li",[s._v("webpack是打包构建工具，是多个loader plugin的集合")])]),s._v(" "),t("h2",{attrs:{id:"如何产出一个lib"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何产出一个lib"}},[s._v("#")]),s._v(" 如何产出一个lib")]),s._v(" "),t("h2",{attrs:{id:"babel-polyfill和babel-runtime的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#babel-polyfill和babel-runtime的区别"}},[s._v("#")]),s._v(" babel-polyfill和babel-runtime的区别")]),s._v(" "),t("ul",[t("li",[s._v("babel-polyfill会污染全局")]),s._v(" "),t("li",[s._v("babel-runtime不会污染全局")]),s._v(" "),t("li",[s._v("开发第三方lib要用babel-runtime，避免与使用方产生冲突")])]),s._v(" "),t("h2",{attrs:{id:"webpack如何使用懒加载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack如何使用懒加载"}},[s._v("#")]),s._v(" webpack如何使用懒加载")]),s._v(" "),t("ul",[t("li",[s._v("import()")]),s._v(" "),t("li",[s._v("结合Vue React 异步组件")]),s._v(" "),t("li",[s._v("结合Vue-router React-router异步加载路由")])]),s._v(" "),t("h2",{attrs:{id:"为何proxy不能被polyfill"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为何proxy不能被polyfill"}},[s._v("#")]),s._v(" 为何Proxy不能被Polyfill")]),s._v(" "),t("p",[s._v("因为(function callback是es5语法)")]),s._v(" "),t("ul",[t("li",[s._v("Class可以用function模拟")]),s._v(" "),t("li",[s._v("Promise可以用callback来模拟")]),s._v(" "),t("li",[s._v("但Proxy的功能用Object.defineProperty无法模拟")])]),s._v(" "),t("blockquote",[t("p",[s._v("Polyfill 是一块代码（通常是 Web 上的 JavaScript），用来为旧浏览器提供它没有原生支持的较新的功能。\nproxy没有任何现成的语法可以模拟到，所以无法Polyfill")])]),s._v(" "),t("h2",{attrs:{id:"常见性能优化方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见性能优化方法"}},[s._v("#")]),s._v(" 常见性能优化方法")]),s._v(" "),t("p",[s._v("从"),t("code",[s._v("构建速度")]),s._v("和"),t("code",[s._v("产出代码")]),s._v("两个方面分析")]),s._v(" "),t("h3",{attrs:{id:"优化构建速度-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化构建速度-2"}},[s._v("#")]),s._v(" 优化构建速度")]),s._v(" "),t("h3",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("ul",[t("li",[s._v("可用于生产环境的\n"),t("ul",[t("li",[s._v("优化babel-loader")]),s._v(" "),t("li",[s._v("IgnorePlugin")]),s._v(" "),t("li",[s._v("noParse")]),s._v(" "),t("li",[s._v("happyPack多进程打包")]),s._v(" "),t("li",[s._v("ParallelUgifyPlugin优化压缩")])])]),s._v(" "),t("li",[s._v("不能用于生产环境\n"),t("ul",[t("li",[s._v("自动更新")]),s._v(" "),t("li",[s._v("热更新")]),s._v(" "),t("li",[s._v("DllPlugin")])])])]),s._v(" "),t("p",[s._v("特别强调：热更新万万不能用于生产环境，在代码中写的热更新范围，在生产打包时一定要删掉，否则生产环境会有问题！")]),s._v(" "),t("h3",{attrs:{id:"优化产出代码-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化产出代码-2"}},[s._v("#")]),s._v(" 优化产出代码")]),s._v(" "),t("ul",[t("li",[s._v("小图片通过base64方式")]),s._v(" "),t("li",[s._v("bundle加hash")]),s._v(" "),t("li",[s._v("懒加载")]),s._v(" "),t("li",[s._v("提取公共代码")]),s._v(" "),t("li",[s._v("使用cdn加速")]),s._v(" "),t("li",[s._v("IgnorePlugin")]),s._v(" "),t("li",[s._v("使用Production模式")]),s._v(" "),t("li",[s._v("开启Scope Hosting")])]),s._v(" "),t("h1",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://webpack.wuhaolin.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("深入浅出webpack"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);